{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external {\"root\":\"L\",\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\"}","webpack:///./src/leaflet.trackplayback/util.js","webpack:///./src/leaflet.trackplayback/track.js","webpack:///./src/leaflet.trackplayback/trackcontroller.js","webpack:///./src/leaflet.trackplayback/clock.js","webpack:///./src/leaflet.trackplayback/tracklayer.js","webpack:///./src/leaflet.trackplayback/draw.js","webpack:///./src/leaflet.trackplayback/trackplayback.js","webpack:///./src/leaflet.trackplayback/index.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isArray","arr","Array","toString","Track","Layer","extend","initialize","trackData","options","setOptions","this","forEach","item","isOrigin","_trackPoints","_timeTick","_update","addTrackPoint","trackPoint","len","length","_addTrackPoint","getTimes","times","push","time","getStartTrackPoint","getEndTrackPoint","getTrackPointByTime","getAllTrackPoints","_formatDistance","distance","toFixed","_getCalculateTrackPointByTime","endpoint","startPt","endPt","left","right","parseInt","t0","t1","p0","p1","point","lng","lat","distanceTo","v","radius","sinx","y","cosx","x","step","rstep","dir","Math","PI","asin","undefined","info","getTrackPointsBeforeTime","tpoints","_sortTrackPointsByTime","_updatetimeTick","j","tmp","TrackController","tracks","draw","_tracks","_tps","addTrack","_draw","_updateTime","getMinTime","_minTime","getMaxTime","_maxTime","getTrackPoints","track","Error","drawTracksByTime","clear","_drawnTracks","drawTrack","getCurrentPoints","prev","curr","next","stime","etime","Clock","speed","maxSpeed","trackController","_trackController","_endTime","_curTime","_speed","_maxSpeed","_intervalID","_lastFpsUpdateTime","start","Util","requestAnimFrame","_tick","stop","cancelAnimFrame","rePlaying","slowSpeed","quickSpeed","getSpeed","getCurTime","getStartTime","getEndTime","isPlaying","setCursor","fire","setSpeed","_caculatefpsTime","now","Date","isPause","stepTime","pow","TrackLayer","Renderer","padding","onAdd","map","_container","DomUtil","getPane","pane","appendChild","_ctx","getContext","onRemove","remove","getContainer","getBounds","_bounds","_map","_animatingZoom","b","container","size","getSize","Browser","retina","setPosition","min","width","height","style","scale","translate","Draw","trackPointOptions","isDraw","useCanvas","stroke","color","fill","fillColor","opacity","trackLineOptions","weight","targetOptions","useImg","imgUrl","showText","toolTipOptions","offset","direction","permanent","circleOptions","shipRadiusOptions","_showTrackPoint","_showTrackLine","on","_onmousemoveEvt","_onmouseclickEvt","_trackLayer","addTo","_trackLayerUpdate","_canvas","_bufferTracks","_trackPointFeatureGroup","featureGroup","img","Image","onload","_targetImg","onerror","src","update","trackpoints","_drawTrack","showTrackPoint","hideTrackPoint","showTrackLine","hideTrackLine","off","hasLayer","removeLayer","_tooltip","_circle","_shipRadius","_clearLayer","element","index","e","cursor","layerPoint","leni","tpoint","_getLayerPoint","_opentoolTip","trackpoint","latlng","latLng","tooltip","setLatLng","setContent","_getTooltipText","circle","setRadius","_drawTrackLine","_drawTrackPointsCanvas","_drawTrackPointsSvg","targetPoint","_drawShipRadius","_drawShipImage","_drawShipCanvas","tp0","save","beginPath","moveTo","tpi","lineTo","globalAlpha","strokeStyle","lineWidth","fillStyle","restore","latLngToLayerPoint","arc","cricleMarker","circleMarker","bindTooltip","addLayer","_drawtxt","text","font","textAlign","textBaseline","fillText","rotate","w","h","dh","closePath","drawImage","targetobj","content","ts","join","bounds","clearRect","clearLayers","TrackPlayBack","data","drawOptions","_initTracks","clock","clockOptions","dispose","trackplayback"],"mappings":"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","file":"leaflet.trackplayback.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"leaflet\")) : factory(root[\"L\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export function isArray (arr) {\r\n  return Array.isArray ? Array.isArray(arr) : Object.prototype.toString.call(arr) === '[object Array]'\r\n}\r\n","import L from 'leaflet'\r\n\r\nimport {\r\n  isArray\r\n} from './util'\r\n\r\n/**\r\n * Track class\r\n */\r\nexport const Track = L.Layer.extend({\r\n\r\n  initialize: function (trackData = [], options) {\r\n    L.setOptions(this, options)\r\n\r\n    trackData.forEach(item => {\r\n      // Added the isOrigin field to identify whether it is the original sampling\r\n      // point and distinguish it from the interpolation point\r\n      item.isOrigin = true\r\n    })\r\n    this._trackPoints = trackData\r\n    this._timeTick = {}\r\n    this._update()\r\n  },\r\n\r\n  addTrackPoint: function (trackPoint) {\r\n    if (isArray(trackPoint)) {\r\n      for (let i = 0, len = trackPoint.length; i < len; i++) {\r\n        this.addTrackPoint(trackPoint[i])\r\n      }\r\n    }\r\n    this._addTrackPoint(trackPoint)\r\n  },\r\n\r\n  getTimes: function () {\r\n    let times = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      times.push(this._trackPoints[i].time)\r\n    }\r\n    return times\r\n  },\r\n\r\n  getStartTrackPoint: function () {\r\n    return this._trackPoints[0]\r\n  },\r\n\r\n  getEndTrackPoint: function () {\r\n    return this._trackPoints[this._trackPoints.length - 1]\r\n  },\r\n\r\n  getTrackPointByTime: function (time) {\r\n    return this._trackPoints[this._timeTick[time]]\r\n  },\r\n\r\n  getAllTrackPoints: function () {\r\n    return this._trackPoints\r\n  },\r\n\r\n  _formatDistance: function (distance) {\r\n    return distance < 1000\r\n      ? `${distance.toFixed(2)} m`\r\n      : `${(distance / 1000).toFixed(2)} km`\r\n  },\r\n\r\n  _getCalculateTrackPointByTime: function (time) {\r\n    // First determine whether the last point is the original point\r\n    let endpoint = this.getTrackPointByTime(time)\r\n    let startPt = this.getStartTrackPoint()\r\n    let endPt = this.getEndTrackPoint()\r\n    let times = this.getTimes()\r\n    if (time < startPt.time || time > endPt.time) return\r\n    let left = 0\r\n    let right = times.length - 1\r\n    let n\r\n    // Handle only one point case\r\n    if (left === right) {\r\n      return endpoint\r\n    }\r\n    // [Binary search] method to find out the time interval of the current time\r\n    while (right - left !== 1) {\r\n      n = parseInt((left + right) / 2)\r\n      if (time > times[n]) left = n\r\n      else right = n\r\n    }\r\n\r\n    let t0 = times[left]\r\n    let t1 = times[right]\r\n    let t = time\r\n    let p0 = this.getTrackPointByTime(t0)\r\n    let p1 = this.getTrackPointByTime(t1)\r\n    startPt = L.point(p0.lng, p0.lat)\r\n    endPt = L.point(p1.lng, p1.lat)\r\n    let s = startPt.distanceTo(endPt)\r\n    // At the same point at different times\r\n    if (s <= 0) {\r\n      endpoint = p1\r\n      return endpoint\r\n    }\r\n    // Suppose the target moves in a straight line at a uniform speed between two points\r\n    // Find the velocity vector and calculate the time t where the target is\r\n    let v = s / (t1 - t0)\r\n    let r = (p1.radius - p0.radius) / (t1 - t0)\r\n    let sinx = (endPt.y - startPt.y) / s\r\n    let cosx = (endPt.x - startPt.x) / s\r\n    let step = v * (t - t0)\r\n    let rstep = r * (t - t0)\r\n    let x = startPt.x + step * cosx\r\n    let y = startPt.y + step * sinx\r\n    let radius = p0.radius + rstep\r\n    // Find the direction of movement of the target, 0-360 degrees\r\n    let dir = endPt.x >= startPt.x ? (Math.PI * 0.5 - Math.asin(sinx)) * 180 / Math.PI : (Math.PI * 1.5 + Math.asin(sinx)) * 180 / Math.PI\r\n\r\n    if (endpoint) {\r\n      if (endpoint.dir === undefined) {\r\n        endpoint.dir = dir\r\n      }\r\n      if (endpoint.radius === undefined) {\r\n        endpoint.radius = radius\r\n      }\r\n    } else {\r\n      endpoint = {\r\n        lng: x,\r\n        lat: y,\r\n        dir: dir,\r\n        isOrigin: false,\r\n        time: time,\r\n        radius: radius,\r\n        info: [\r\n          {\r\n            key: 'Accuracy:',\r\n            value: this._formatDistance(radius)\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    return endpoint\r\n  },\r\n\r\n  // Get the trajectory before a certain point in time\r\n  getTrackPointsBeforeTime: function (time) {\r\n    let tpoints = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      if (this._trackPoints[i].time < time) {\r\n        tpoints.push(this._trackPoints[i])\r\n      }\r\n    }\r\n    // Get the last point, linearly interpolated from time\r\n    let endPt = this._getCalculateTrackPointByTime(time)\r\n    if (endPt) {\r\n      tpoints.push(endPt)\r\n    }\r\n    return tpoints\r\n  },\r\n\r\n  _addTrackPoint: function (trackPoint) {\r\n    trackPoint.isOrigin = true\r\n    this._trackPoints.push(trackPoint)\r\n    this._update()\r\n  },\r\n\r\n  _update: function () {\r\n    this._sortTrackPointsByTime()\r\n    this._updatetimeTick()\r\n  },\r\n\r\n  // Track points are sorted by time [bubble sort]\r\n  _sortTrackPointsByTime: function () {\r\n    let len = this._trackPoints.length\r\n    for (let i = 0; i < len; i++) {\r\n      for (let j = 0; j < len - 1 - i; j++) {\r\n        if (this._trackPoints[j].time > this._trackPoints[j + 1].time) {\r\n          let tmp = this._trackPoints[j + 1]\r\n          this._trackPoints[j + 1] = this._trackPoints[j]\r\n          this._trackPoints[j] = tmp\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  // Time indexing of trajectory points to optimize search performance\r\n  _updatetimeTick: function () {\r\n    this._timeTick = {}\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      this._timeTick[this._trackPoints[i].time] = i\r\n    }\r\n  }\r\n})\r\n\r\nexport const track = function (trackData, options) {\r\n  return new Track(trackData, options)\r\n}\r\n","import L from 'leaflet'\r\n\r\nimport {\r\n  isArray\r\n} from './util'\r\nimport {\r\n  Track\r\n} from './track'\r\n\r\n/**\r\n * Controller class\r\n * Control trajectory and drawing\r\n */\r\nexport const TrackController = L.Layer.extend({\r\n\r\n  initialize: function (tracks = [], draw, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._tracks = []\r\n    this._tps = []\r\n    this.addTrack(tracks)\r\n\r\n    this._draw = draw\r\n\r\n    this._updateTime()\r\n  },\r\n\r\n  getMinTime: function () {\r\n    return this._minTime\r\n  },\r\n\r\n  getMaxTime: function () {\r\n    return this._maxTime\r\n  },\r\n\r\n  getTrackPoints: function () {\r\n    return this._tps\r\n  },\r\n\r\n  addTrack: function (track) {\r\n    if (isArray(track)) {\r\n      for (let i = 0, len = track.length; i < len; i++) {\r\n        this.addTrack(track[i])\r\n      }\r\n    } else if (track instanceof Track) {\r\n      this._tracks.push(track)\r\n      this._updateTime()\r\n    } else {\r\n      throw new Error('tracks must be an instance of `Track` or an array of `Track` instance!')\r\n    }\r\n  },\r\n\r\n  drawTracksByTime: function (time) {\r\n    this._draw.clear()\r\n    this._drawnTracks = []\r\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n      let track = this._tracks[i]\r\n      this._tps = track.getTrackPointsBeforeTime(time)\r\n      if (this._tps && this._tps.length) this._draw.drawTrack(this._tps)\r\n    }\r\n  },\r\n\r\n  getCurrentPoints: function () {\r\n    return {\r\n      prev: this._tps[this._tps.length - 2],\r\n      curr: this._tps[this._tps.length - 1],\r\n      next: this._tracks[0].getAllTrackPoints()[this._tps.length]\r\n    }\r\n  },\r\n\r\n  _updateTime: function () {\r\n    this._minTime = this._tracks[0].getStartTrackPoint().time\r\n    this._maxTime = this._tracks[0].getEndTrackPoint().time\r\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n      let stime = this._tracks[i].getStartTrackPoint().time\r\n      let etime = this._tracks[i].getEndTrackPoint().time\r\n      if (stime < this._minTime) {\r\n        this._minTime = stime\r\n      }\r\n      if (etime > this._maxTime) {\r\n        this._maxTime = etime\r\n      }\r\n    }\r\n  }\r\n\r\n})\r\n\r\nexport const trackController = function (tracks, draw, options) {\r\n  return new TrackController(tracks, draw, options)\r\n}\r\n","import L from 'leaflet'\r\n/**\r\n * Clock class, control track playback animation\r\n */\r\nexport const Clock = L.Layer.extend({\r\n\r\n  options: {\r\n    // Play speed\r\n    // Calculation fpstime * Math.pow (2, this._speed - 1)\r\n    speed: 12,\r\n    // Maximum playback speed\r\n    maxSpeed: 65\r\n  },\r\n\r\n  initialize: function (trackController, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._trackController = trackController\r\n    this._endTime = this._trackController.getMaxTime()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this._speed = this.options.speed\r\n    this._maxSpeed = this.options.maxSpeed\r\n    this._intervalID = null\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  start: function () {\r\n    if (this._intervalID) return\r\n    this._intervalID = L.Util.requestAnimFrame(this._tick, this)\r\n  },\r\n\r\n  stop: function () {\r\n    if (!this._intervalID) return\r\n    L.Util.cancelAnimFrame(this._intervalID)\r\n    this._intervalID = null\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  rePlaying: function () {\r\n    this.stop()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this.start()\r\n  },\r\n\r\n  slowSpeed: function () {\r\n    this._speed = this._speed <= 1 ? this._speed : this._speed - 1\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  },\r\n\r\n  quickSpeed: function () {\r\n    this._speed = this._speed >= this._maxSpeed ? this._speed : this._speed + 1\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  },\r\n\r\n  getSpeed: function () {\r\n    return this._speed\r\n  },\r\n\r\n  getCurTime: function () {\r\n    return this._curTime\r\n  },\r\n\r\n  getStartTime: function () {\r\n    return this._trackController.getMinTime()\r\n  },\r\n\r\n  getEndTime: function () {\r\n    return this._trackController.getMaxTime()\r\n  },\r\n\r\n  getTrackPoints: function () {\r\n    return this._trackController.getTrackPoints()\r\n  },\r\n\r\n  isPlaying: function () {\r\n    return !!this._intervalID\r\n  },\r\n\r\n  setCursor: function (time) {\r\n    this._curTime = time\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    const { prev, curr, next } = this._trackController.getCurrentPoints()\r\n    this.fire('tick', {\r\n      prev: prev,\r\n      curr: curr,\r\n      next: next,\r\n      time: this._curTime\r\n    })\r\n  },\r\n\r\n  setSpeed: function (speed) {\r\n    this._speed = speed\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  },\r\n\r\n  // Calculate the time interval between two frames, in seconds\r\n\r\n  _caculatefpsTime: function (now) {\r\n    let time\r\n    if (this._lastFpsUpdateTime === 0) {\r\n      time = 0\r\n    } else {\r\n      time = now - this._lastFpsUpdateTime\r\n    }\r\n    this._lastFpsUpdateTime = now\r\n    // Convert milliseconds to seconds\r\n    time = time / 1000\r\n    return time\r\n  },\r\n\r\n  _tick: function () {\r\n    let now = +new Date()\r\n    let fpstime = this._caculatefpsTime(now)\r\n    let isPause = false\r\n    let stepTime = fpstime * Math.pow(2, this._speed - 1)\r\n    this._curTime += stepTime\r\n    if (this._curTime >= this._endTime) {\r\n      this._curTime = this._endTime\r\n      isPause = true\r\n    }\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    const { prev, curr, next } = this._trackController.getCurrentPoints()\r\n    this.fire('tick', {\r\n      prev: prev,\r\n      curr: curr,\r\n      next: next,\r\n      time: this._curTime\r\n    })\r\n    if (!isPause) this._intervalID = L.Util.requestAnimFrame(this._tick, this)\r\n  }\r\n})\r\n\r\nexport const clock = function (trackController, options) {\r\n  return new Clock(trackController, options)\r\n}\r\n","import L from 'leaflet'\r\n\r\n/**\r\n * Track layer\r\n */\r\nexport const TrackLayer = L.Renderer.extend({\r\n\r\n  initialize: function (options) {\r\n    L.Renderer.prototype.initialize.call(this, options)\r\n    this.options.padding = 0.1\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._container = L.DomUtil.create('canvas', 'leaflet-zoom-animated')\r\n\r\n    var pane = map.getPane(this.options.pane)\r\n    pane.appendChild(this._container)\r\n\r\n    this._ctx = this._container.getContext('2d')\r\n\r\n    this._update()\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    L.DomUtil.remove(this._container)\r\n  },\r\n\r\n  getContainer: function () {\r\n    return this._container\r\n  },\r\n\r\n  getBounds: function () {\r\n    return this._bounds\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._map._animatingZoom && this._bounds) {\r\n      return\r\n    }\r\n\r\n    L.Renderer.prototype._update.call(this)\r\n\r\n    var b = this._bounds\r\n\r\n    var container = this._container\r\n\r\n    var size = b.getSize()\r\n\r\n    var m = L.Browser.retina ? 2 : 1\r\n\r\n    L.DomUtil.setPosition(container, b.min)\r\n\r\n    // set canvas size (also clearing it); use double size on retina\r\n    container.width = m * size.x\r\n    container.height = m * size.y\r\n    container.style.width = size.x + 'px'\r\n    container.style.height = size.y + 'px'\r\n\r\n    if (L.Browser.retina) {\r\n      this._ctx.scale(2, 2)\r\n    }\r\n\r\n    // translate so we use the same path coordinates after canvas element moves\r\n    this._ctx.translate(-b.min.x, -b.min.y)\r\n\r\n    // Tell paths to redraw themselves\r\n    this.fire('update')\r\n  }\r\n})\r\n","import L from 'leaflet'\r\n\r\nimport { TrackLayer } from './tracklayer'\r\n\r\n/**\r\n * Drawing class\r\n * Complete the drawing of trajectory lines, trajectory points and targets\r\n */\r\nexport const Draw = L.Layer.extend({\r\n  trackPointOptions: {\r\n    isDraw: true,\r\n    useCanvas: true,\r\n    stroke: true,\r\n    color: '#000',\r\n    fill: true,\r\n    fillColor: '#278edd',\r\n    opacity: 1,\r\n    radius: 5\r\n  },\r\n  trackLineOptions: {\r\n    isDraw: true,\r\n    stroke: true,\r\n    color: '#278edd',\r\n    weight: 2,\r\n    fill: false,\r\n    fillColor: '#278edd',\r\n    opacity: 1\r\n  },\r\n  targetOptions: {\r\n    useImg: false,\r\n    imgUrl: '../../static/images/ship.png',\r\n    showText: false,\r\n    width: 8,\r\n    height: 18,\r\n    color: '#000', // stroke color\r\n    fillColor: '#89c257'\r\n  },\r\n  toolTipOptions: {\r\n    offset: [0, 0],\r\n    direction: 'top',\r\n    permanent: true\r\n  },\r\n  circleOptions: {\r\n    fillColor: '#278edd'\r\n  },\r\n  shipRadiusOptions: {\r\n    color: '#89c257',\r\n    fillColor: '#89c257'\r\n  },\r\n\r\n  initialize: function (map, options) {\r\n    L.extend(this.trackPointOptions, options.trackPointOptions)\r\n    L.extend(this.trackLineOptions, options.trackLineOptions)\r\n    L.extend(this.targetOptions, options.targetOptions)\r\n    L.extend(this.toolTipOptions, options.toolTipOptions)\r\n\r\n    this._showTrackPoint = this.trackPointOptions.isDraw\r\n    this._showTrackLine = this.trackLineOptions.isDraw\r\n\r\n    this._map = map\r\n    this._map.on('mousemove', this._onmousemoveEvt, this)\r\n    this._map.on('click', this._onmouseclickEvt, this)\r\n\r\n    this._trackLayer = new TrackLayer().addTo(map)\r\n    this._trackLayer.on('update', this._trackLayerUpdate, this)\r\n\r\n    this._canvas = this._trackLayer.getContainer()\r\n    this._ctx = this._canvas.getContext('2d')\r\n\r\n    this._bufferTracks = []\r\n\r\n    if (!this.trackPointOptions.useCanvas) {\r\n      this._trackPointFeatureGroup = L.featureGroup([]).addTo(map)\r\n    }\r\n\r\n    // If using a target, load the image first\r\n    if (this.targetOptions.useImg) {\r\n      const img = new Image()\r\n      img.onload = () => {\r\n        this._targetImg = img\r\n      }\r\n      img.onerror = () => {\r\n        throw new Error('img load error!')\r\n      }\r\n      img.src = this.targetOptions.imgUrl\r\n    }\r\n  },\r\n\r\n  update: function () {\r\n    this._trackLayerUpdate()\r\n  },\r\n\r\n  drawTrack: function (trackpoints) {\r\n    this._bufferTracks.push(trackpoints)\r\n    this._drawTrack(trackpoints)\r\n  },\r\n\r\n  showTrackPoint: function () {\r\n    this._showTrackPoint = true\r\n    this.update()\r\n  },\r\n\r\n  hideTrackPoint: function () {\r\n    this._showTrackPoint = false\r\n    this.update()\r\n  },\r\n\r\n  showTrackLine: function () {\r\n    this._showTrackLine = true\r\n    this.update()\r\n  },\r\n\r\n  hideTrackLine: function () {\r\n    this._showTrackLine = false\r\n    this.update()\r\n  },\r\n\r\n  remove: function () {\r\n    this._bufferTracks = []\r\n    this._trackLayer.off('update', this._trackLayerUpdate, this)\r\n    this._map.off('mousemove', this._onmousemoveEvt, this)\r\n    this._map.off('click', this._onmouseclickEvt, this)\r\n    if (this._map.hasLayer(this._trackLayer)) {\r\n      this._map.removeLayer(this._trackLayer)\r\n    }\r\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\r\n      this._map.removeLayer(this._trackPointFeatureGroup)\r\n    }\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    if (this._map.hasLayer(this._circle)) {\r\n      this._map.removeLayer(this._circle)\r\n    }\r\n    if (this._map.hasLayer(this._shipRadius)) {\r\n      this._map.removeLayer(this._shipRadius)\r\n    }\r\n  },\r\n\r\n  clear: function () {\r\n    this._clearLayer()\r\n    this._bufferTracks = []\r\n  },\r\n\r\n  _trackLayerUpdate: function () {\r\n    if (this._bufferTracks.length) {\r\n      this._clearLayer()\r\n      this._bufferTracks.forEach(\r\n        function (element, index) {\r\n          this._drawTrack(element)\r\n        }.bind(this)\r\n      )\r\n    }\r\n  },\r\n\r\n  _onmousemoveEvt: function (e) {\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    if (this._map.hasLayer(this._circle)) {\r\n      this._map.removeLayer(this._circle)\r\n    }\r\n    if (!this._showTrackPoint) {\r\n      this._canvas.style.cursor = 'grab'\r\n      return\r\n    }\r\n    let point = e.layerPoint\r\n    if (this._bufferTracks.length) {\r\n      for (let i = 0, leni = this._bufferTracks.length; i < leni; i++) {\r\n        for (let j = 0, len = this._bufferTracks[i].length; j < len; j++) {\r\n          let tpoint = this._getLayerPoint(this._bufferTracks[i][j])\r\n          if (point.distanceTo(tpoint) <= this.trackPointOptions.radius) {\r\n            this._canvas.style.cursor = 'pointer'\r\n            this._opentoolTip(this._bufferTracks[i][j])\r\n            return\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this._canvas.style.cursor = 'grab'\r\n  },\r\n\r\n  _onmouseclickEvt: function (e) {\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    if (this._map.hasLayer(this._circle)) {\r\n      this._map.removeLayer(this._circle)\r\n    }\r\n    let point = e.layerPoint\r\n    if (this._bufferTracks.length) {\r\n      for (let i = 0, leni = this._bufferTracks.length; i < leni; i++) {\r\n        for (let j = 0, len = this._bufferTracks[i].length; j < len; j++) {\r\n          let tpoint = this._getLayerPoint(this._bufferTracks[i][j])\r\n          if (point.distanceTo(tpoint) <= this.trackPointOptions.radius) {\r\n            this.fire('click', this._bufferTracks[i][j])\r\n            this._opentoolTip(this._bufferTracks[i][j])\r\n            return\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _opentoolTip: function (trackpoint) {\r\n    let latlng = L.latLng(trackpoint.lat, trackpoint.lng)\r\n\r\n    if (trackpoint.info) {\r\n      let tooltip = (this._tooltip = L.tooltip(this.toolTipOptions))\r\n      tooltip.setLatLng(latlng)\r\n      tooltip.addTo(this._map)\r\n      tooltip.setContent(this._getTooltipText(trackpoint))\r\n    }\r\n\r\n    if (trackpoint.radius) {\r\n      let circle = (this._circle = L.circle(latlng, this.circleOptions))\r\n      circle.setRadius(trackpoint.radius)\r\n      circle.addTo(this._map)\r\n    }\r\n  },\r\n\r\n  _drawTrack: function (trackpoints) {\r\n    // Trajectory line\r\n    if (this._showTrackLine) {\r\n      this._drawTrackLine(trackpoints)\r\n    }\r\n    // Trajectory points drawn\r\n    if (this._showTrackPoint) {\r\n      if (this.trackPointOptions.useCanvas) {\r\n        this._drawTrackPointsCanvas(trackpoints)\r\n      } else {\r\n        this._drawTrackPointsSvg(trackpoints)\r\n      }\r\n    }\r\n    // Drawing ship\r\n    let targetPoint = trackpoints[trackpoints.length - 1]\r\n    if (this.targetOptions.useImg && this._targetImg) {\r\n      this._drawShipRadius(targetPoint)\r\n      this._drawShipImage(targetPoint)\r\n    } else {\r\n      this._drawShipRadius(targetPoint)\r\n      this._drawShipCanvas(targetPoint)\r\n    }\r\n  },\r\n\r\n  _drawTrackLine: function (trackpoints) {\r\n    let options = this.trackLineOptions\r\n    let tp0 = this._getLayerPoint(trackpoints[0])\r\n    this._ctx.save()\r\n    this._ctx.beginPath()\r\n    // Trajectory line\r\n    this._ctx.moveTo(tp0.x, tp0.y)\r\n    for (let i = 1, len = trackpoints.length; i < len; i++) {\r\n      let tpi = this._getLayerPoint(trackpoints[i])\r\n      this._ctx.lineTo(tpi.x, tpi.y)\r\n    }\r\n    this._ctx.globalAlpha = options.opacity\r\n    if (options.stroke) {\r\n      this._ctx.strokeStyle = options.color\r\n      this._ctx.lineWidth = options.weight\r\n      this._ctx.stroke()\r\n    }\r\n    if (options.fill) {\r\n      this._ctx.fillStyle = options.fillColor\r\n      this._ctx.fill()\r\n    }\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawTrackPointsCanvas: function (trackpoints) {\r\n    let options = this.trackPointOptions\r\n    this._ctx.save()\r\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\r\n      if (trackpoints[i].isOrigin) {\r\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\r\n        let radius = options.radius\r\n        let point = this._map.latLngToLayerPoint(latLng)\r\n        this._ctx.beginPath()\r\n        this._ctx.arc(point.x, point.y, radius, 0, Math.PI * 2, false)\r\n        this._ctx.globalAlpha = options.opacity\r\n        if (options.stroke) {\r\n          this._ctx.strokeStyle = options.color\r\n          this._ctx.stroke()\r\n        }\r\n        if (options.fill) {\r\n          this._ctx.fillStyle = options.fillColor\r\n          this._ctx.fill()\r\n        }\r\n      }\r\n    }\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawTrackPointsSvg: function (trackpoints) {\r\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\r\n      if (trackpoints[i].isOrigin) {\r\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\r\n        let cricleMarker = L.circleMarker(latLng, this.trackPointOptions)\r\n        cricleMarker.bindTooltip(\r\n          this._getTooltipText(trackpoints[i]),\r\n          this.toolTipOptions\r\n        )\r\n        this._trackPointFeatureGroup.addLayer(cricleMarker)\r\n      }\r\n    }\r\n  },\r\n\r\n  _drawtxt: function (text, trackpoint) {\r\n    let point = this._getLayerPoint(trackpoint)\r\n    this._ctx.save()\r\n    this._ctx.font = '12px Verdana'\r\n    this._ctx.fillStyle = '#000'\r\n    this._ctx.textAlign = 'center'\r\n    this._ctx.textBaseline = 'bottom'\r\n    this._ctx.fillText(text, point.x, point.y - 12, 200)\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawShipCanvas: function (trackpoint) {\r\n    let point = this._getLayerPoint(trackpoint)\r\n    let rotate = trackpoint.dir || 0\r\n    let w = this.targetOptions.width\r\n    let h = this.targetOptions.height\r\n    let dh = h / 3\r\n\r\n    this._ctx.save()\r\n    this._ctx.fillStyle = this.targetOptions.fillColor\r\n    this._ctx.strokeStyle = this.targetOptions.color\r\n    this._ctx.translate(point.x, point.y)\r\n    this._ctx.rotate((Math.PI / 180) * rotate)\r\n    this._ctx.beginPath()\r\n    this._ctx.moveTo(0, 0 - h / 2)\r\n    this._ctx.lineTo(0 - w / 2, 0 - h / 2 + dh)\r\n    this._ctx.lineTo(0 - w / 2, 0 + h / 2)\r\n    this._ctx.lineTo(0 + w / 2, 0 + h / 2)\r\n    this._ctx.lineTo(0 + w / 2, 0 - h / 2 + dh)\r\n    this._ctx.closePath()\r\n    this._ctx.fill()\r\n    this._ctx.stroke()\r\n\r\n    this._ctx.restore()\r\n  },\r\n\r\n  // Draw estimated accuracy radius of current location\r\n  _drawShipRadius: function (trackpoint) {\r\n    if (this._map.hasLayer(this._shipRadius)) {\r\n      this._map.removeLayer(this._shipRadius)\r\n    }\r\n\r\n    let latlng = L.latLng(trackpoint.lat, trackpoint.lng)\r\n    let circle = (this._shipRadius = L.circle(latlng, this.shipRadiusOptions))\r\n    circle.setRadius(trackpoint.radius)\r\n    circle.addTo(this._map)\r\n  },\r\n\r\n  _drawShipImage: function (trackpoint) {\r\n    let point = this._getLayerPoint(trackpoint)\r\n    let dir = trackpoint.dir || 0\r\n    let width = this.targetOptions.width\r\n    let height = this.targetOptions.height\r\n    let offset = {\r\n      x: width / 2,\r\n      y: height / 2\r\n    }\r\n    this._ctx.save()\r\n    this._ctx.translate(point.x, point.y)\r\n    this._ctx.rotate((Math.PI / 180) * dir)\r\n    this._ctx.drawImage(\r\n      this._targetImg,\r\n      0 - offset.x,\r\n      0 - offset.y,\r\n      width,\r\n      height\r\n    )\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _getTooltipText: function (targetobj) {\r\n    let content = []\r\n    content.push('<table>')\r\n    if (targetobj.ts) {\r\n      content.push('<tr>')\r\n      content.push(targetobj.ts)\r\n      content.push('</tr>')\r\n    }\r\n    if (targetobj.info && targetobj.info.length) {\r\n      for (let i = 0, len = targetobj.info.length; i < len; i++) {\r\n        content.push('<tr>')\r\n        content.push('<td>' + targetobj.info[i].key + '</td>')\r\n        content.push('<td>' + targetobj.info[i].value + '</td>')\r\n        content.push('</tr>')\r\n      }\r\n    }\r\n    content.push('</table>')\r\n    content = content.join('')\r\n    return content\r\n  },\r\n\r\n  _clearLayer: function () {\r\n    let bounds = this._trackLayer.getBounds()\r\n    if (bounds) {\r\n      let size = bounds.getSize()\r\n      this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y)\r\n    } else {\r\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height)\r\n    }\r\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\r\n      this._trackPointFeatureGroup.clearLayers()\r\n    }\r\n  },\r\n\r\n  _getLayerPoint: function (trackpoint) {\r\n    return this._map.latLngToLayerPoint(\r\n      L.latLng(trackpoint.lat, trackpoint.lng)\r\n    )\r\n  }\r\n})\r\n\r\nexport const draw = function (map, options) {\r\n  return new Draw(map, options)\r\n}\r\n","import L from 'leaflet'\r\nimport {\r\n  Track\r\n} from './track'\r\nimport {\r\n  TrackController\r\n} from './trackcontroller'\r\nimport {\r\n  Clock\r\n} from './clock'\r\nimport {\r\n  Draw\r\n} from './draw'\r\nimport * as Util from './util'\r\n\r\n/**\r\n * single track data\r\n * [{lat: 30, lng: 116, time: 1502529980, heading: 300, info:[]},{},....]\r\n *\r\n * mutiple track data\r\n * [single track data, single track data, single track data]\r\n */\r\nexport const TrackPlayBack = L.Layer.extend({\r\n\r\n  initialize: function (data, map, options = {}) {\r\n    let drawOptions = {\r\n      trackPointOptions: options.trackPointOptions,\r\n      trackLineOptions: options.trackLineOptions,\r\n      targetOptions: options.targetOptions,\r\n      toolTipOptions: options.toolTipOptions\r\n    }\r\n    this.tracks = this._initTracks(data)\r\n    this.draw = new Draw(map, drawOptions)\r\n    this.draw.on('click', e => this.fire('click', e), this)\r\n    this.trackController = new TrackController(this.tracks, this.draw)\r\n    this.clock = new Clock(this.trackController, options.clockOptions)\r\n    this.clock.on('tick', this._tick, this)\r\n  },\r\n  start: function () {\r\n    this.clock.start()\r\n    return this\r\n  },\r\n  stop: function () {\r\n    this.clock.stop()\r\n    return this\r\n  },\r\n  rePlaying: function () {\r\n    this.clock.rePlaying()\r\n    return this\r\n  },\r\n  slowSpeed: function () {\r\n    this.clock.slowSpeed()\r\n    return this\r\n  },\r\n  quickSpeed: function () {\r\n    this.clock.quickSpeed()\r\n    return this\r\n  },\r\n  getSpeed: function () {\r\n    return this.clock.getSpeed()\r\n  },\r\n  getCurTime: function () {\r\n    return this.clock.getCurTime()\r\n  },\r\n  getStartTime: function () {\r\n    return this.clock.getStartTime()\r\n  },\r\n  getEndTime: function () {\r\n    return this.clock.getEndTime()\r\n  },\r\n  getTrackPoints: function () {\r\n    return this.clock.getTrackPoints()\r\n  },\r\n  isPlaying: function () {\r\n    return this.clock.isPlaying()\r\n  },\r\n  setCursor: function (time) {\r\n    this.clock.setCursor(time)\r\n    return this\r\n  },\r\n  setSpeed: function (speed) {\r\n    this.clock.setSpeed(speed)\r\n    return this\r\n  },\r\n  showTrackPoint: function () {\r\n    this.draw.showTrackPoint()\r\n    return this\r\n  },\r\n  hideTrackPoint: function () {\r\n    this.draw.hideTrackPoint()\r\n    return this\r\n  },\r\n  showTrackLine: function () {\r\n    this.draw.showTrackLine()\r\n    return this\r\n  },\r\n  hideTrackLine: function () {\r\n    this.draw.hideTrackLine()\r\n    return this\r\n  },\r\n  dispose: function () {\r\n    this.clock.off('tick', this._tick)\r\n    this.clock.stop()\r\n    this.draw.remove()\r\n    this.tracks = null\r\n    this.draw = null\r\n    this.trackController = null\r\n    this.clock = null\r\n  },\r\n  _tick: function (e) {\r\n    this.fire('tick', e)\r\n  },\r\n  _initTracks: function (data) {\r\n    let tracks = []\r\n    if (Util.isArray(data)) {\r\n      if (Util.isArray(data[0])) {\r\n        // Multiple tracks\r\n        for (let i = 0, len = data.length; i < len; i++) {\r\n          tracks.push(new Track(data[i]))\r\n        }\r\n      } else {\r\n        // Single track\r\n        tracks.push(new Track(data))\r\n      }\r\n    }\r\n    return tracks\r\n  }\r\n})\r\n\r\nexport const trackplayback = function (data, map, options) {\r\n  return new TrackPlayBack(data, map, options)\r\n}\r\n","import L from 'leaflet'\r\n\r\nimport {\r\n  TrackPlayBack,\r\n  trackplayback\r\n} from './trackplayback'\r\n\r\nL.TrackPlayBack = TrackPlayBack\r\nL.trackplayback = trackplayback\r\n"],"sourceRoot":""}