{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9671f85c5718a8f14d2b","webpack:///./src/control.playback/control.playback.js","webpack:///./src/leaflet.playback/index.js","webpack:///./src/leaflet.playback/track.js","webpack:///./src/leaflet.playback/trackcontroller.js","webpack:///./src/leaflet.playback/clock.js","webpack:///./src/leaflet.playback/requestanimationframe.js","webpack:///./src/leaflet.playback/draw.js","webpack:///./src/leaflet.playback/tracklayer.js","webpack:///./src/leaflet.playback/util.js"],"names":["L","Control","PlayBack","extend","options","position","data","bootstrapIconClass","play","stop","restart","slow","quick","close","initialize","prototype","call","_data","_playback","onAdd","map","_initLayout","_update","_initEvts","_container","onRemove","draw","removeLayer","getControlHtml","html","push","join","className","DomUtil","create","DomEvent","disableClickPropagation","$container","$","_operateObjs","isshowpoint","find","isshowline","speed","startTime","endTime","range","curTime","on","get","_isshowpoint","_isshowline","_play","_restart","_slow","_quick","_close","stopPropagation","preventDefault","_scrollchange","e","target","checked","trackPointOptions","isDraw","update","trackLineOptions","$this","hasClass","removeClass","addClass","attr","clock","start","$play","rePlaying","slowSpeed","sp","getSpeed","quickSpeed","remove","_map","val","Number","value","setCursor","_dataTransform","msg","shipList","tracks","i","len","length","track","Track","Draw","trackController","TrackController","Clock","_clockCallback","bind","setTime","getStartTime","Util","getTimeStrFromUnix","getEndTime","getCurTime","s","time","console","log","datas","ph","num","dataobj","timePosList","j","lenj","posList","obj","pj","lng","lo","lat","la","ti","dir","parseFloat","co","heading","he","info","key","latlngTodfmStr","toFixed","control","playback","Class","dataObj","setOptions","_trackPoints","_timeTick","isOrigin","addTrackPoint","trackPoint","getTimes","times","getStartTrackPoint","getEndTrackPoint","getTrackPointByTime","getCalculateTrackPointByTime","endpoint","startPt","endPt","left","right","n","parseInt","t0","t1","t","point","distanceTo","v","sinx","y","cosx","x","step","Math","PI","asin","undefined","getTrackPointsBeforeTime","tpoints","_sortTrackPointsByTime","_updatetimeTick","tmp","_tracks","_minTime","_maxTime","_draw","_caculateCount","getMinTime","getMaxTime","addTrack","drawTracksByTime","clear","tps","drawTrack","stime","etime","shipCount","pointCount","maxSpeed","callback","_trackController","_endTime","_curTime","_speed","_maxSpeed","_callback","_lastFpsUpdateTime","caculateFps","now","fps","caculatefpsTime","_tick","Date","fpstime","isPause","stepTime","pow","_intervalID","window","requestAnimationFrame","cancelAnimationFrame","isPlaying","setSpeed","originalWebkitMethod","wrapper","geckoVersion","userAgent","navigator","index","self","webkitRequestAnimationFrame","element","mozRequestAnimationFrame","indexOf","substr","oRequestAnimationFrame","msRequestAnimationFrame","finish","setTimeout","timeout","useCanvas","stroke","color","fill","fillColor","radius","weight","shipOptions","useImg","imgUrl","width","height","toolTipOptions","offset","direction","permanent","_trackLayer","addTo","_canvas","getContainer","_ctx","getContext","_bufferTracks","_trackPointFeatureGroup","featureGroup","_trackLayerUpdate","_onmousemoveEvt","_clearLayer","forEach","_drawTrack","layerPoint","leni","tpoint","latLngToLayerPoint","latLng","_opentoolTip","hasLayer","_tooltip","style","cursor","trackpoint","latlng","tooltip","setLatLng","setContent","getTooltipText","trackpoints","_drawTrackLine","_drawShip2","_drawShip","_drawTrackPoints","_drawTrackPoints2","tp0","save","beginPath","moveTo","tpi","lineTo","strokeStyle","lineWidth","fillStyle","restore","arc","cricleMarker","circleMarker","bindTooltip","addLayer","rotate","w","h","dh","translate","closePath","img","Image","onload","drawImage","src","targetobj","content","bounds","getBounds","size","getSize","clearRect","min","clearLayers","TrackLayer","Renderer","padding","setAttribute","pane","getPane","appendChild","_bounds","_animatingZoom","b","container","m","Browser","retina","setPosition","scale","fire","isNaN","newDate","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minuts","getMinutes","seconds","getSeconds","ret","latlngTodfm","latlngtype","iskeepCapacity","spointCount","resobj","newval","positiveNum","abs","du","fen","miao","res","str"],"mappings":"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","file":"Library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Library\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Library\"] = factory();\n\telse\n\t\troot[\"Library\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9671f85c5718a8f14d2b","import {PlayBack, playback} from '../leaflet.playback/index'\r\n\r\nL.Control.PlayBack = L.Control.extend({\r\n\r\n  options: {\r\n    position: 'topright',\r\n    data: {}\r\n  },\r\n\r\n  bootstrapIconClass: {\r\n    play: 'glyphicon-play',\r\n    stop: 'glyphicon-pause',\r\n    restart: 'glyphicon-repeat',\r\n    slow: 'glyphicon-backward',\r\n    quick: 'glyphicon-forward',\r\n    close: 'glyphicon-remove'\r\n  },\r\n\r\n  initialize: function (options) {\r\n    L.Control.prototype.initialize.call(this, options)\r\n    this._data = this.options.data\r\n    this._playback = {}\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._initLayout()\r\n    this._update()\r\n    this._initEvts()\r\n    return this._container\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    this._playback.draw.removeLayer()\r\n  },\r\n\r\n  getControlHtml: function () {\r\n    var html = []\r\n    html.push('<div class=\"optionsDiv\">')\r\n    html.push('<label><input type=\"checkbox\" class=\"isshowpoint\">显示轨迹点</label>')\r\n    html.push('<label><input type=\"checkbox\" class=\"isshowline\">显示轨迹线</label>')\r\n    html.push('</div>')\r\n    html.push('<div class=\"operateContainer\">')\r\n    html.push('<span class=\"btn-play glyphicon glyphicon-play\" title=\"播放\"></span>')\r\n    html.push('<span class=\"btn-restart glyphicon glyphicon-repeat\" title=\"重播\"></span>')\r\n    html.push('<span class=\"btn-slow glyphicon glyphicon-backward\" title=\"减速\"></span>')\r\n    html.push('<span class=\"btn-quick glyphicon glyphicon-forward\" title=\"加速\"></span>')\r\n    html.push('<span class=\"speed\"></span>')\r\n    html.push('<span class=\"btn-close glyphicon glyphicon-remove\" title=\"关闭\"></span>')\r\n    html.push('</div>')\r\n    html.push('<div class=\"scrollContainer\">')\r\n    html.push('<span class=\"stime\"></span>')\r\n    html.push('<span class=\"etime\"></span>')\r\n    html.push('<input type=\"range\" class=\"range\"/>')\r\n    html.push('<span class=\"curtime\"></span>')\r\n    html.push('</div>')\r\n    return html.join('')\r\n  },\r\n\r\n  _initLayout: function () {\r\n    var className = 'leaflet-control-playback'\r\n    this._container = L.DomUtil.create('div', className)\r\n\r\n    if (L.DomEvent) {\r\n      L.DomEvent.disableClickPropagation(this._container)\r\n    }\r\n\r\n    var $container = $(this._container)\r\n    $container.html(this.getControlHtml())\r\n\r\n    this._operateObjs = {\r\n      isshowpoint: $container.find('.isshowpoint'),\r\n      isshowline: $container.find('.isshowline'),\r\n      play: $container.find('.btn-play'),\r\n      restart: $container.find('.btn-restart'),\r\n      slow: $container.find('.btn-slow'),\r\n      quick: $container.find('.btn-quick'),\r\n      speed: $container.find('.speed'),\r\n      close: $container.find('.btn-close'),\r\n      startTime: $container.find('.stime'),\r\n      endTime: $container.find('.etime'),\r\n      range: $container.find('.range'),\r\n      curTime: $container.find('.curtime')\r\n    }\r\n  },\r\n\r\n  _initEvts: function () {\r\n    L.DomEvent.on(this._operateObjs.isshowpoint.get(0), 'change', this._isshowpoint, this)\r\n    L.DomEvent.on(this._operateObjs.isshowline.get(0), 'change', this._isshowline, this)\r\n    L.DomEvent.on(this._operateObjs.play.get(0), 'click', this._play, this)\r\n    L.DomEvent.on(this._operateObjs.restart.get(0), 'click', this._restart, this)\r\n    L.DomEvent.on(this._operateObjs.slow.get(0), 'click', this._slow, this)\r\n    L.DomEvent.on(this._operateObjs.quick.get(0), 'click', this._quick, this)\r\n    L.DomEvent.on(this._operateObjs.close.get(0), 'click', this._close, this)\r\n    L.DomEvent.on(this._operateObjs.range.get(0), 'click mousedown dbclick', L.DomEvent.stopPropagation)\r\n      .on(this._operateObjs.range.get(0), 'click', L.DomEvent.preventDefault)\r\n      .on(this._operateObjs.range.get(0), 'change', this._scrollchange, this)\r\n      .on(this._operateObjs.range.get(0), 'mousemove', this._scrollchange, this)\r\n  },\r\n\r\n  _isshowpoint: function (e) {\r\n    if (e.target.checked) {\r\n      this._playback.draw.options.trackPointOptions.isDraw = true\r\n    } else {\r\n      this._playback.draw.options.trackPointOptions.isDraw = false\r\n    }\r\n    this._playback.draw.update()\r\n  },\r\n\r\n  _isshowline: function (e) {\r\n    if (e.target.checked) {\r\n      this._playback.draw.options.trackLineOptions.isDraw = true\r\n    } else {\r\n      this._playback.draw.options.trackLineOptions.isDraw = false\r\n    }\r\n    this._playback.draw.update()\r\n  },\r\n\r\n  _play: function () {\r\n    var $this = this._operateObjs.play\r\n    if ($this.hasClass(this.bootstrapIconClass.play)) {\r\n      $this.removeClass(this.bootstrapIconClass.play)\r\n      $this.addClass(this.bootstrapIconClass.stop)\r\n      $this.attr('title', '停止')\r\n      this._playback.clock.start()\r\n    } else {\r\n      $this.removeClass(this.bootstrapIconClass.stop)\r\n      $this.addClass(this.bootstrapIconClass.play)\r\n      $this.attr('title', '播放')\r\n      this._playback.clock.stop()\r\n    }\r\n  },\r\n\r\n  _restart: function () {\r\n    var $play = this._operateObjs.play  // 播放开始改变播放按钮样式\r\n    $play.removeClass(this.bootstrapIconClass.play)\r\n    $play.addClass(this.bootstrapIconClass.stop)\r\n    $play.attr('title', '停止')\r\n    this._playback.clock.rePlaying()\r\n  },\r\n\r\n  _slow: function () {\r\n    this._playback.clock.slowSpeed()\r\n    var sp = this._playback.clock.getSpeed()\r\n    this._operateObjs.speed.html('X' + sp)\r\n  },\r\n\r\n  _quick: function () {\r\n    this._playback.clock.quickSpeed()\r\n    var sp = this._playback.clock.getSpeed()\r\n    this._operateObjs.speed.html('X' + sp)\r\n  },\r\n\r\n  _close: function () {\r\n    L.DomUtil.remove(this._container)\r\n    if (this.onRemove) {\r\n      this.onRemove(this._map)\r\n    }\r\n    return this\r\n  },\r\n\r\n  _scrollchange: function (e) {\r\n    var val = Number(e.target.value)\r\n    this._playback.clock.setCursor(val)\r\n  },\r\n\r\n  _update: function () {\r\n    var map = this._map\r\n    var data = this._dataTransform(this._data.msg.shipList)\r\n    if (map && data) {\r\n      var tracks = []\r\n      for (var i = 0, len = data.length; i < len; i++) {\r\n        var track = new PlayBack.Track(data[i], this.options)\r\n        tracks.push(track)\r\n      }\r\n      this._playback.draw = new PlayBack.Draw(map, this.options)\r\n      this._playback.trackController = new PlayBack.TrackController(tracks, this._playback.draw, this.options)\r\n      this._playback.clock = new PlayBack.Clock(this._playback.trackController, this._clockCallback.bind(this), this.options)\r\n\r\n      this._operateObjs.speed.html('X' + this._playback.clock.getSpeed())\r\n      this.setTime()\r\n      this._playback.clock.setCursor(this.getStartTime())\r\n    }\r\n  },\r\n\r\n  setTime: function () {\r\n    var startTime = PlayBack.Util.getTimeStrFromUnix(this.getStartTime())\r\n    var endTime = PlayBack.Util.getTimeStrFromUnix(this.getEndTime())\r\n    var curTime = PlayBack.Util.getTimeStrFromUnix(this.getCurTime())\r\n    this._operateObjs.startTime.html(startTime)\r\n    this._operateObjs.endTime.html(endTime)\r\n    this._operateObjs.curTime.html(curTime)\r\n    this._operateObjs.range.attr('min', this.getStartTime())\r\n    this._operateObjs.range.attr('max', this.getEndTime())\r\n    this._operateObjs.range.val(this.getCurTime())\r\n  },\r\n\r\n  getStartTime: function () {\r\n    return this._playback.clock.getStartTime()\r\n  },\r\n\r\n  getEndTime: function () {\r\n    return this._playback.clock.getEndTime()\r\n  },\r\n\r\n  getCurTime: function () {\r\n    return this._playback.clock.getCurTime()\r\n  },\r\n\r\n  _clockCallback: function (s) {\r\n    // 更新时间\r\n    var time = PlayBack.Util.getTimeStrFromUnix(s)\r\n    this._operateObjs.curTime.html(time)\r\n    // 更新时间轴\r\n    this._operateObjs.range.val(s)\r\n    // 播放结束后改变播放按钮样式\r\n    if (s >= this.getEndTime()) {\r\n      var $play = this._operateObjs.play\r\n      $play.removeClass(this.bootstrapIconClass.stop)\r\n      $play.addClass(this.bootstrapIconClass.play)\r\n      $play.attr('title', '播放')\r\n      this._playback.clock.stop()\r\n    }\r\n  },\r\n\r\n  _dataTransform: function (data) {\r\n    if (!data || !data.length) {\r\n      console.log('playback_error:data transform error!')\r\n      return\r\n    }\r\n    var datas = []\r\n    for (var i = 0, len = data.length; i < len; i++) {\r\n      var ph = data[i].num\r\n      var dataobj = {}\r\n      dataobj.timePosList = []\r\n      for (var j = 0, lenj = data[i].posList.length; j < lenj; j++) {\r\n        var obj = {}\r\n        var pj = data[i].posList[j]\r\n        obj.lng = pj.lo / 600000 // 经度 【必须参数】\r\n        obj.lat = pj.la / 600000 // 纬度 【必须参数】\r\n        obj.time = pj.ti // 以秒为单位的unix时间戳 【必须参数】\r\n        obj.dir = parseFloat(pj.co / 10) // 航向 0-360度\r\n        obj.heading = parseFloat(pj.he) // 航艏向 0-360度\r\n        obj.info = [ // 轨迹点信息\r\n          {key: '批号', value: ph},\r\n          {key: '经度', value: PlayBack.Util.latlngTodfmStr(obj.lat, 'lng')},\r\n          {key: '纬度', value: PlayBack.Util.latlngTodfmStr(obj.lat, 'lat')},\r\n          {key: '时间', value: PlayBack.Util.getTimeStrFromUnix(pj.ti)},\r\n          {key: '航向', value: (pj.co / 10).toFixed(1) + '°'},\r\n          {key: '航艏向', value: parseFloat(pj.he).toFixed(1) + '°'},\r\n          {key: '航速', value: parseFloat(pj.sp / 10).toFixed(1) + '节'}\r\n        ]\r\n        dataobj.timePosList.push(obj)\r\n      }\r\n      datas.push(dataobj)\r\n    }\r\n    return datas\r\n  }\r\n})\r\n\r\nL.control.playback = function (options) {\r\n  return new L.Control.PlayBack(options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/control.playback/control.playback.js","import {Track, track} from './track'\r\nimport {TrackController, trackController} from './trackcontroller'\r\nimport {Clock, clock} from './clock'\r\nimport {Draw, draw} from './draw'\r\nimport {Util} from './util'\r\n\r\nvar PlayBack = {}\r\nvar playback = {}\r\n\r\nPlayBack.Track = Track\r\nPlayBack.TrackController = TrackController\r\nPlayBack.Clock = Clock\r\nPlayBack.Draw = Draw\r\n\r\n\r\nplayback.track = track\r\nplayback.trackController = trackController\r\nplayback.clock = clock\r\nplayback.draw = draw\r\n\r\nPlayBack.Util = Util\r\n\r\nexport {PlayBack, playback}\r\n\r\n// window.L.PlayBack = PlayBack\r\n// window.L.playback = playback\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/index.js","// import L from 'leaflet'\r\n\r\nexport var Track = L.Class.extend({\r\n\r\n  initialize: function (dataObj, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._trackPoints = []\r\n    this._timeTick = {}\r\n    if (dataObj.timePosList && dataObj.timePosList.length) {\r\n      for (let i = 0, len = dataObj.timePosList.length; i < len; i++) {\r\n        // isOrigin标记是否属于原始点\r\n        dataObj.timePosList[i].isOrigin = true\r\n        this._trackPoints.push(dataObj.timePosList[i])\r\n      }\r\n      this._update()\r\n    }\r\n  },\r\n\r\n  addTrackPoint: function (trackPoint) {\r\n    trackPoint.isOrigin = true\r\n    this._trackPoints.push(trackPoint)\r\n    this._update()\r\n  },\r\n\r\n  getTimes: function () {\r\n    var times = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      times.push(this._trackPoints[i].time)\r\n    }\r\n    return times;\r\n  },\r\n\r\n  getStartTrackPoint: function () {\r\n    return this._trackPoints[0]\r\n  },\r\n\r\n  getEndTrackPoint: function () {\r\n    return this._trackPoints[this._trackPoints.length - 1]\r\n  },\r\n\r\n  getTrackPointByTime: function (time) {\r\n    return this._timeTick[time]\r\n  },\r\n\r\n  getCalculateTrackPointByTime: function (time) {\r\n    // 先判断最后一个点是否为原始点\r\n    var endpoint = this.getTrackPointByTime(time)\r\n    var startPt = this.getStartTrackPoint()\r\n    var endPt = this.getEndTrackPoint()\r\n    var times = this.getTimes()\r\n    if (time < startPt.time || time > endPt.time) return;\r\n    var left = 0\r\n    var right = times.length - 1\r\n    var n\r\n    // 处理只有一个点情况\r\n    if (left === right) {\r\n      return endpoint\r\n    }\r\n    while (right - left !== 1) {\r\n      n = parseInt((left + right) / 2)\r\n      if (time > times[n]) left = n\r\n      else right = n\r\n    }\r\n\r\n    var t0 = times[left]\r\n    var t1 = times[right]\r\n    var t = time\r\n    if (!this.getTrackPointByTime(t0)){\r\n      console.log('error');\r\n    }\r\n    startPt = L.point(this.getTrackPointByTime(t0).lng, this.getTrackPointByTime(t0).lat)\r\n    endPt = L.point(this.getTrackPointByTime(t1).lng, this.getTrackPointByTime(t1).lat)\r\n    var s = startPt.distanceTo(endPt);\r\n    // 不同时间在同一个点情形\r\n    if (s <= 0) {\r\n      endpoint = this.getTrackPointByTime(t1)\r\n      return endpoint\r\n    }\r\n    var v = s / (t1 - t0)\r\n    var sinx = (endPt.y - startPt.y) / s\r\n    var cosx = (endPt.x - startPt.x) / s\r\n    var step = v * (t - t0)\r\n    var x = startPt.x + step * cosx\r\n    var y = startPt.y + step * sinx\r\n    var dir = endPt.x >= startPt.x ? (Math.PI * 0.5 - Math.asin(sinx)) * 180 / Math.PI : (Math.PI * 1.5 + Math.asin(sinx)) * 180 / Math.PI\r\n\r\n    if (endpoint) {\r\n      if (endpoint.dir === undefined) { endpoint.dir = dir }\r\n    } else {\r\n      endpoint = {\r\n        lng: x,\r\n        lat: y,\r\n        dir: dir,\r\n        isOrigin: false,\r\n        time: time\r\n      }\r\n    }\r\n    return endpoint\r\n  },\r\n\r\n  getTrackPointsBeforeTime: function (time) {\r\n    var tpoints = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      if (this._trackPoints[i].time < time) {\r\n        tpoints.push(this._trackPoints[i])\r\n      }\r\n    }\r\n    var endPt = this.getCalculateTrackPointByTime(time)\r\n    if (endPt) {\r\n      tpoints.push(endPt)\r\n    }\r\n    return tpoints\r\n  },\r\n\r\n  _update: function () {\r\n    this._sortTrackPointsByTime()\r\n    this._updatetimeTick()\r\n  },\r\n\r\n  _sortTrackPointsByTime: function () {\r\n    var len = this._trackPoints.length\r\n    for (let i = 0; i < len; i++) {\r\n      for (let j = 0; j < len - 1 - i; j++) {\r\n        if (this._trackPoints[j].time > this._trackPoints[j + 1].time) {\r\n          let tmp = this._trackPoints[j + 1]\r\n          this._trackPoints[j + 1] = this._trackPoints[j]\r\n          this._trackPoints[j] = tmp\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _updatetimeTick: function () {\r\n    this._timeTick = {}\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      this._timeTick[this._trackPoints[i].time] = this._trackPoints[i]\r\n    }\r\n  }\r\n})\r\n\r\nexport var track = function (dataObj, options) {\r\n  return new Track(dataObj, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/track.js","// import L from 'leaflet'\r\n\r\nexport var TrackController = L.Class.extend({\r\n\r\n  initialize: function (tracks, draw, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._tracks = []\r\n\r\n    this._minTime = null\r\n    this._maxTime = null\r\n\r\n    this._draw = draw\r\n\r\n    if (tracks && tracks.length) {\r\n      for (let i = 0, len = tracks.length; i < len; i++) {\r\n        this._tracks.push(tracks[i])\r\n      }\r\n    }\r\n\r\n    this._update()\r\n\r\n    this._caculateCount()\r\n  },\r\n\r\n  getMinTime: function () {\r\n    return this._minTime\r\n  },\r\n\r\n  getMaxTime: function () {\r\n    return this._maxTime\r\n  },\r\n\r\n  addTrack: function (track) {\r\n    if (track) {\r\n      this._tracks.push(track)\r\n      this._update()\r\n    }\r\n  },\r\n\r\n  drawTracksByTime: function (time) {\r\n    this._draw.clear()\r\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n      let track = this._tracks[i]\r\n      let tps = track.getTrackPointsBeforeTime(time)\r\n      if (tps && tps.length) this._draw.drawTrack(tps)\r\n    }\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._tracks.length) {\r\n      this._minTime = this._tracks[0].getStartTrackPoint().time\r\n      this._maxTime = this._tracks[0].getEndTrackPoint().time\r\n      for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n        let stime = this._tracks[i].getStartTrackPoint().time\r\n        let etime = this._tracks[i].getEndTrackPoint().time\r\n        if (stime < this._minTime) {\r\n          this._minTime = stime\r\n        }\r\n        if (etime > this._maxTime) {\r\n          this._maxTime = etime\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _caculateCount: function () {\r\n    var shipCount = this._tracks.length\r\n    var pointCount = 0\r\n    for (let i = 0, len = shipCount; i < len; i++) {\r\n      pointCount += this._tracks[i]._trackPoints.length\r\n    }\r\n    console.log('共有: ' + shipCount + '艘船;')\r\n    console.log('共有: ' + pointCount + '个轨迹点;')\r\n  }\r\n\r\n})\r\n\r\nexport var trackController = function (tracks, draw, options) {\r\n  return new TrackController(tracks, draw, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/trackcontroller.js","// import L from 'leaflet'\r\nimport './requestanimationframe.js'\r\n\r\nexport var Clock = L.Class.extend({\r\n\r\n  options: {\r\n    speed: 13,\r\n    maxSpeed: 65\r\n  },\r\n\r\n  initialize: function (trackController, callback, options) {\r\n    L.setOptions(this, options)\r\n    this._trackController = trackController\r\n    this._endTime = this._trackController.getMaxTime()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this._speed = this.options.speed\r\n    this._maxSpeed = this.options.maxSpeed\r\n    this._callback = callback || function () {}\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  // 计算帧率 ， 单位：帧/秒，浏览器的最大值是：60帧/秒\r\n  caculateFps: function (now) {\r\n    var fps = 1000 / (now - this._lastFpsUpdateTime)\r\n    return fps\r\n  },\r\n\r\n  // 计算两帧时间间隔，单位：秒\r\n  caculatefpsTime: function (now) {\r\n    var time = (now - this._lastFpsUpdateTime) / 1000\r\n    if (this._lastFpsUpdateTime === 0) {\r\n      time = 0\r\n    }\r\n    this._lastFpsUpdateTime = now\r\n    return time\r\n  },\r\n\r\n  _tick: function () {\r\n    var now = +new Date()\r\n    var fpstime = this.caculatefpsTime(now)\r\n    var isPause = false\r\n    var stepTime = fpstime * Math.pow(2, this._speed - 1)\r\n    this._curTime += stepTime\r\n    if (this._curTime >= this._endTime) {\r\n      this._curTime = this._endTime\r\n      isPause = true\r\n    }\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    this._callback(this._curTime)\r\n    if (!isPause) this._intervalID = window.requestAnimationFrame(this._tick.bind(this))\r\n  },\r\n\r\n  start: function () {\r\n    if (this._intervalID) return;\r\n    this._intervalID = window.requestAnimationFrame(this._tick.bind(this))\r\n  },\r\n\r\n  stop: function () {\r\n    if (!this._intervalID) return;\r\n    window.cancelAnimationFrame(this._intervalID)\r\n    this._intervalID = null\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  rePlaying: function () {\r\n    this.stop()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this.start()\r\n  },\r\n\r\n  slowSpeed: function () {\r\n    this._speed <= 1 ? this._speed : this._speed -= 1;\r\n    if (this._intervalID) {\r\n      this.stop();\r\n      this.start();\r\n    }\r\n  },\r\n\r\n  quickSpeed: function () {\r\n    this._speed >= this._maxSpeed ? this._speed : this._speed += 1;\r\n    if (this._intervalID) {\r\n      this.stop();\r\n      this.start();\r\n    }\r\n  },\r\n\r\n  getSpeed: function () {\r\n    return this._speed\r\n  },\r\n\r\n  getCurTime: function () {\r\n    return this._curTime\r\n  },\r\n\r\n  getStartTime: function () {\r\n    return this._trackController.getMinTime()\r\n  },\r\n\r\n  getEndTime: function () {\r\n    return this._trackController.getMaxTime()\r\n  },\r\n\r\n  isPlaying: function () {\r\n    return this._intervalID ? 1 : 0\r\n  },\r\n\r\n  setCursor: function (time) {\r\n    this._curTime = time\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    this._callback(this._curTime)\r\n  },\r\n\r\n  setSpeed: function (speed) {\r\n    this._speed = speed\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  }\r\n})\r\n\r\nexport var clock = function (trackController, callback, options) {\r\n  return new Clock(trackController, callback, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/clock.js","// window = window || this\r\nwindow.requestAnimationFrame =\r\n  (function () {\r\n    var originalWebkitMethod,\r\n      wrapper,\r\n      callback,\r\n      geckoVersion = 0,\r\n      userAgent = navigator.userAgent,\r\n      index = 0,\r\n      self = this;\r\n\r\n    // Workaround for chrome 10 bug where Chrome\r\n    // does not pass the thime to the animation function\r\n\r\n    if (window.webkitRequestAnimationFrame) {\r\n      // Define the wrapper\r\n\r\n      wrapper = function (time) {\r\n        if (time === undefined) {\r\n          time = +new Date();\r\n        }\r\n        self.callback(time);\r\n      };\r\n\r\n      // make the switch\r\n      originalWebkitMethod = window.webkitRequestAnimationFrame;\r\n\r\n      window.webkitRequestAnimationFrame = function (callback, element) {\r\n        self.callback = callback;\r\n        // Browser calls wrapper; wrapper calls callback\r\n        originalWebkitMethod(wrapper, element)\r\n      }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations to 30-40 fps\r\n    if (window.mozRequestAnimationFrame) {\r\n      // Check the Gecko version. Gecko is used by browsers\r\n      // other than Firefox. Gecko 2.0 corresponds to Firefox 4.0\r\n      index = userAgent.indexOf('rv:');\r\n      if (userAgent.indexOf('Gecko') !== -1) {\r\n        geckoVersion = userAgent.substr(index + 3, 3);\r\n        if (geckoVersion === '2.0') {\r\n          // Forces the return statement to fall through\r\n          // to the setTimeout() function\r\n          window.mozRequestAnimationFrame = undefined;\r\n        }\r\n      }\r\n    }\r\n\r\n    return window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame ||\r\n      window.oRequestAnimationFrame ||\r\n      window.msRequestAnimationFrame ||\r\n\r\n      function (callback, element) {\r\n        var start, finish;\r\n        window.setTimeout(function () {\r\n          start = +new Date();\r\n          callback(start);\r\n          finish = +new Date();\r\n          self.timeout = 1000 / 60 - (finish - start);\r\n        }, self.timeout);\r\n      }\r\n  }())\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/requestanimationframe.js","// import L from 'leaflet'\r\nimport {TrackLayer} from './tracklayer'\r\n\r\nexport var Draw = L.Class.extend({\r\n\r\n  options: {\r\n    trackPointOptions: {\r\n      isDraw: false,\r\n      useCanvas: true,\r\n      stroke: false,\r\n      color: '#ef0300',\r\n      fill: true,\r\n      fillColor: '#ef0300',\r\n      radius: 4\r\n    },\r\n    trackLineOptions: {\r\n      isDraw: false,\r\n      stroke: true,\r\n      color: '#1C54E2', // stroke color\r\n      weight: 2,\r\n      fill: false,\r\n      fillColor: '#000'\r\n    },\r\n    shipOptions: {\r\n      useImg: false,\r\n      imgUrl: '../../static/images/ship.png',\r\n      width: 8,\r\n      height: 18,\r\n      color: '#00f', // stroke color\r\n      fillColor: '#9FD12D'\r\n    },\r\n    toolTipOptions: {\r\n      offset: [0, 0],\r\n      direction: 'top',\r\n      permanent: false\r\n    }\r\n  },\r\n\r\n  initialize: function (map, options) {\r\n    L.setOptions(this, options)\r\n    this._map = map\r\n    this._trackLayer = new TrackLayer().addTo(map)\r\n    this._canvas = this._trackLayer.getContainer()\r\n    this._ctx = this._canvas.getContext('2d')\r\n    this._bufferTracks = []\r\n    this._trackPointFeatureGroup = L.featureGroup([]).addTo(map)\r\n\r\n    this._trackLayer.on('update', this._trackLayerUpdate, this)\r\n    this._map.on('mousemove', this._onmousemoveEvt, this)\r\n  },\r\n\r\n  update: function () {\r\n    this._trackLayerUpdate()\r\n  },\r\n\r\n  _trackLayerUpdate: function () {\r\n    if (this._bufferTracks.length) {\r\n      this._clearLayer()\r\n      this._bufferTracks.forEach(function (element, index) {\r\n        this._drawTrack(element, false)\r\n      }.bind(this));\r\n    }\r\n  },\r\n\r\n  _onmousemoveEvt: function (e) {\r\n    if (!this.options.trackPointOptions.isDraw) {\r\n      return\r\n    }\r\n    var point = e.layerPoint\r\n    if (this._bufferTracks.length) {\r\n      for (let i = 0, leni = this._bufferTracks.length; i < leni; i++) {\r\n        for (let j = 0, len = this._bufferTracks[i].length; j < len; j++) {\r\n          let tpoint = this._map.latLngToLayerPoint(L.latLng(this._bufferTracks[i][j].lat, this._bufferTracks[i][j].lng))\r\n          if (point.distanceTo(tpoint) <= this.options.trackPointOptions.radius) {\r\n            this._opentoolTip(this._bufferTracks[i][j])\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    this._canvas.style.cursor = 'pointer'\r\n  },\r\n\r\n  _opentoolTip: function (trackpoint) {\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    this._canvas.style.cursor = 'default'\r\n    var latlng = L.latLng(trackpoint.lat, trackpoint.lng)\r\n    var tooltip = this._tooltip = L.tooltip(this.options.toolTipOptions)\r\n    tooltip.setLatLng(latlng)\r\n    tooltip.addTo(this._map)\r\n    tooltip.setContent(this.getTooltipText(trackpoint))\r\n  },\r\n\r\n  _drawTrack: function (trackpoints) {\r\n    // 画轨迹线\r\n    if (this.options.trackLineOptions.isDraw) {\r\n      this._drawTrackLine(trackpoints)\r\n    }\r\n    // 画船\r\n    if (this.options.shipOptions.useImg) {\r\n      this._drawShip2(trackpoints[trackpoints.length - 1])\r\n    } else {\r\n      this._drawShip(trackpoints[trackpoints.length - 1])\r\n    }\r\n    // 画经过的轨迹点\r\n    if (this.options.trackPointOptions.isDraw) {\r\n      if (this.options.trackPointOptions.useCanvas) {\r\n        this._drawTrackPoints(trackpoints)\r\n      } else {\r\n        this._drawTrackPoints2(trackpoints)\r\n      }\r\n    }\r\n  },\r\n\r\n  drawTrack: function (trackpoints) {\r\n    this._bufferTracks.push(trackpoints)\r\n    this._drawTrack(trackpoints)\r\n  },\r\n\r\n  _drawTrackLine: function (trackpoints) {\r\n    var options = this.options.trackLineOptions\r\n    var tp0 = this._map.latLngToLayerPoint(L.latLng(trackpoints[0].lat, trackpoints[0].lng))\r\n    this._ctx.save()\r\n    this._ctx.beginPath()\r\n    // 画轨迹线\r\n    this._ctx.moveTo(tp0.x, tp0.y)\r\n    for (let i = 1, len = trackpoints.length; i < len; i++) {\r\n      let tpi = this._map.latLngToLayerPoint(L.latLng(trackpoints[i].lat, trackpoints[i].lng))\r\n      this._ctx.lineTo(tpi.x, tpi.y)\r\n    }\r\n    if (options.stroke) {\r\n      this._ctx.strokeStyle = options.color\r\n      this._ctx.lineWidth = options.weight\r\n      this._ctx.stroke()\r\n    }\r\n    if (options.fill) {\r\n      this._ctx.fillStyle = options.fillColor\r\n      this._ctx.fill()\r\n    }\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawTrackPoints: function (trackpoints) {\r\n    var options = this.options.trackPointOptions\r\n    this._ctx.save()\r\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\r\n      if (trackpoints[i].isOrigin) {\r\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\r\n        let radius = options.radius\r\n        let point = this._map.latLngToLayerPoint(latLng)\r\n        this._ctx.beginPath()\r\n        this._ctx.arc(point.x, point.y, radius, 0, Math.PI * 2, false)\r\n        if (options.stroke) {\r\n          this._ctx.strokeStyle = options.color\r\n          this._ctx.stroke()\r\n        }\r\n        if (options.fill) {\r\n          this._ctx.fillStyle = options.fillColor\r\n          this._ctx.fill()\r\n        }\r\n      }\r\n    }\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawTrackPoints2: function (trackpoints) {\r\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\r\n      if (trackpoints[i].isOrigin) {\r\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\r\n        let cricleMarker = L.circleMarker(latLng, this.options.trackPointOptions)\r\n        cricleMarker.bindTooltip(this.getTooltipText(trackpoints[i]), this.options.toolTipOptions)\r\n        this._trackPointFeatureGroup.addLayer(cricleMarker)\r\n      }\r\n    }\r\n  },\r\n\r\n  _drawShip: function (trackpoint) {\r\n    var point = this._map.latLngToLayerPoint(L.latLng(trackpoint.lat, trackpoint.lng))\r\n    var rotate = trackpoint.dir || 0\r\n    var w = this.options.shipOptions.width\r\n    var h = this.options.shipOptions.height\r\n    var dh = h / 3\r\n\r\n    this._ctx.save()\r\n    this._ctx.fillStyle = this.options.shipOptions.fillColor\r\n    this._ctx.strokeStyle = this.options.shipOptions.color\r\n    this._ctx.translate(point.x, point.y)\r\n    this._ctx.rotate((Math.PI / 180) * rotate)\r\n    this._ctx.beginPath()\r\n    this._ctx.moveTo(0, 0 - h / 2)\r\n    this._ctx.lineTo(0 - w / 2, 0 - h / 2 + dh)\r\n    this._ctx.lineTo(0 - w / 2, 0 + h / 2)\r\n    this._ctx.lineTo(0 + w / 2, 0 + h / 2)\r\n    this._ctx.lineTo(0 + w / 2, 0 - h / 2 + dh)\r\n    this._ctx.closePath()\r\n    this._ctx.fill()\r\n    this._ctx.stroke()\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawShip2: function (trackpoint) {\r\n    var point = this._map.latLngToLayerPoint(L.latLng(trackpoint.lat, trackpoint.lng))\r\n    var dir = trackpoint.dir || 0\r\n    var width = this.options.shipOptions.width\r\n    var height = this.options.shipOptions.height\r\n    var offset = {\r\n      x: width / 2,\r\n      y: height / 2\r\n    }\r\n    var img = new Image()\r\n    img.onload = function () {\r\n      this._ctx.save()\r\n      this._ctx.translate(point.x, point.y)\r\n      this._ctx.rotate((Math.PI / 180) * dir)\r\n      this._ctx.drawImage(img, 0 - offset.x, 0 - offset.y, width, height)\r\n      this._ctx.restore()\r\n    }.bind(this)\r\n    img.src = this.options.shipOptions.imgUrl\r\n  },\r\n\r\n  getTooltipText: function (targetobj) {\r\n    var content = [];\r\n    content.push('<table>');\r\n    if (targetobj.info && targetobj.info.length) {\r\n      for (let i = 0, len = targetobj.info.length; i < len; i++) {\r\n        content.push('<tr>')\r\n        content.push('<td>' + targetobj.info[i].key + '</td>')\r\n        content.push('<td>' + targetobj.info[i].value + '</td>')\r\n        content.push('</tr>')\r\n      }\r\n    }\r\n    content.push('</table>');\r\n    content = content.join('');\r\n    return content;\r\n  },\r\n\r\n  removeLayer: function () {\r\n    if (this._map.hasLayer(this._trackLayer)) {\r\n      this._map.removeLayer(this._trackLayer)\r\n    }\r\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\r\n      this._map.removeLayer(this._trackPointFeatureGroup)\r\n    }\r\n  },\r\n\r\n  _clearLayer: function () {\r\n    var bounds = this._trackLayer.getBounds()\r\n    if (bounds) {\r\n      var size = bounds.getSize();\r\n      this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);\r\n    } else {\r\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n    }\r\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\r\n      this._trackPointFeatureGroup.clearLayers()\r\n    }\r\n  },\r\n\r\n  clear: function () {\r\n    this._clearLayer()\r\n    this._bufferTracks = []\r\n  }\r\n})\r\n\r\nexport var draw = function (map, options) {\r\n  return new Draw(map, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/draw.js","// import L from 'leaflet'\r\n\r\nexport var TrackLayer = L.Renderer.extend({\r\n\r\n  initialize: function (options) {\r\n    L.Renderer.prototype.initialize.call(this, options);\r\n    this.options.padding = 0.1;\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._container = L.DomUtil.create('canvas', 'leaflet-zoom-animated');\r\n    this._container.setAttribute('id', 'canvas');\r\n\r\n    var pane = map.getPane(this.options.pane);\r\n    pane.appendChild(this._container);\r\n\r\n    this._ctx = this._container.getContext('2d');\r\n\r\n    this._update();\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    L.DomUtil.remove(this._container);\r\n  },\r\n\r\n  getContainer: function () {\r\n    return this._container\r\n  },\r\n\r\n  getBounds: function () {\r\n    return this._bounds\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._map._animatingZoom && this._bounds) {\r\n      return;\r\n    }\r\n\r\n    L.Renderer.prototype._update.call(this);\r\n\r\n    var b = this._bounds,\r\n      container = this._container,\r\n      size = b.getSize(),\r\n      m = L.Browser.retina ? 2 : 1;\r\n\r\n    L.DomUtil.setPosition(container, b.min);\r\n\r\n    // set canvas size (also clearing it); use double size on retina\r\n    container.width = m * size.x;\r\n    container.height = m * size.y;\r\n    container.style.width = size.x + 'px';\r\n    container.style.height = size.y + 'px';\r\n\r\n    if (L.Browser.retina) {\r\n      this._ctx.scale(2, 2);\r\n    }\r\n\r\n    // translate so we use the same path coordinates after canvas element moves\r\n    this._ctx.translate(-b.min.x, -b.min.y);\r\n\r\n    // Tell paths to redraw themselves\r\n    this.fire('update');\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/tracklayer.js","export var Util = {\r\n  /* 根据unix时间戳(单位:秒)获取时间字符串 */\r\n  getTimeStrFromUnix: function (time) {\r\n    time = parseInt(time * 1000)\r\n    if (isNaN(time)) {\r\n      return ''\r\n    }\r\n    var newDate = new Date(time)\r\n    var year = newDate.getFullYear()\r\n    var month = (newDate.getMonth() + 1) < 10 ? '0' + (newDate.getMonth() + 1) : newDate.getMonth() + 1\r\n    var day = newDate.getDate() < 10 ? '0' + newDate.getDate() : newDate.getDate()\r\n    var hours = newDate.getHours() < 10 ? '0' + newDate.getHours() : newDate.getHours()\r\n    var minuts = newDate.getMinutes() < 10 ? '0' + newDate.getMinutes() : newDate.getMinutes()\r\n    var seconds = newDate.getSeconds() < 10 ? '0' + newDate.getSeconds() : newDate.getSeconds()\r\n    var ret = year + '-' + month + '-' + day + ' ' + hours + ':' + minuts + ':' + seconds\r\n    return ret\r\n  },\r\n\r\n  latlngTodfm: function (val, latlngtype, iskeepCapacity, spointCount) {\r\n    var resobj = [];\r\n    var dir;\r\n    var newval = parseFloat(val);\r\n    var positiveNum = Math.abs(newval);\r\n    var du = parseInt(positiveNum);\r\n    var fen = parseInt(positiveNum * 60) - du * 60;\r\n    var miao = positiveNum * 60 * 60 - fen * 60 - du * 60 * 60;\r\n    if (typeof spointCount === 'undefined' || spointCount <= 0) { spointCount = 0; }\r\n    if (spointCount === 0) {\r\n      miao = parseInt(miao);\r\n    } else {\r\n      miao = miao.toFixed(spointCount);\r\n    }\r\n    if (typeof iskeepCapacity === 'undefined') { iskeepCapacity = true; }\r\n    if (iskeepCapacity) {\r\n      if (latlngtype === 'lng') {\r\n        if (du < 10) du = '00' + du;\r\n        if (du >= 10 && du < 100) du = '0' + du;\r\n      } else {\r\n        if (du < 10) du = '0' + du;\r\n      }\r\n      // if(fen<10) fen = '0'+fen;\r\n      // if(miao<10 && spointCount===0) miao = '0'+miao;\r\n    }\r\n    if (latlngtype === 'lat') {\r\n      if (newval < 0) dir = 'S';\r\n      else dir = 'N';\r\n    }\r\n    if (latlngtype === 'lng') {\r\n      if (newval < 0) dir = 'W';\r\n      else dir = 'E';\r\n    }\r\n    resobj.push(du, fen, miao, dir);\r\n    return resobj;\r\n  },\r\n\r\n  latlngTodfmStr: function (val, latlngtype, spointCount) {\r\n    var res = this.latlngTodfm(val, latlngtype, spointCount);\r\n    var str = res[3] + ' ' + res[0] + '°' + res[1] + '′' + res[2] + '″';\r\n    return str;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/util.js"],"sourceRoot":""}