{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 22739740b6c15c02508c","webpack:///./src/leaflet.playback/index.js","webpack:///./src/leaflet.playback/track.js","webpack:///./src/leaflet.playback/trackcontroller.js","webpack:///./src/leaflet.playback/clock.js","webpack:///./src/leaflet.playback/requestanimationframe.js","webpack:///./src/leaflet.playback/draw.js","webpack:///./src/leaflet.playback/tracklayer.js","webpack:///./src/leaflet.playback/util.js"],"names":["PlayBack","playback","Track","TrackController","Clock","Draw","track","trackController","clock","draw","Util","window","L","Class","extend","initialize","dataObj","options","setOptions","_trackPoints","_timeTick","timePosList","length","i","len","isOrigin","push","_update","addTrackPoint","trackPoint","getTimes","times","time","getStartTrackPoint","getEndTrackPoint","getTrackPointByTime","getCalculateTrackPointByTime","endpoint","startPt","endPt","left","right","n","parseInt","t0","t1","t","console","log","point","lng","lat","s","distanceTo","v","sinx","y","cosx","x","step","dir","Math","PI","asin","undefined","getTrackPointsBeforeTime","tpoints","_sortTrackPointsByTime","_updatetimeTick","j","tmp","tracks","map","_map","_tracks","_minTime","_maxTime","_draw","_caculateCount","locateToFirstTrack","getMinTime","getMaxTime","track0","spoint","latlng","latLng","panTo","addTrack","drawTracksByTime","clear","tps","drawTrack","stime","etime","shipCount","pointCount","speed","maxSpeed","callback","_trackController","_endTime","_curTime","_speed","_maxSpeed","_callback","_lastFpsUpdateTime","caculateFps","now","fps","caculatefpsTime","_tick","Date","fpstime","isPause","stepTime","pow","_intervalID","requestAnimationFrame","bind","start","stop","cancelAnimationFrame","rePlaying","slowSpeed","quickSpeed","getSpeed","getCurTime","getStartTime","getEndTime","isPlaying","setCursor","setSpeed","originalWebkitMethod","wrapper","geckoVersion","userAgent","navigator","index","self","webkitRequestAnimationFrame","element","mozRequestAnimationFrame","indexOf","substr","oRequestAnimationFrame","msRequestAnimationFrame","finish","setTimeout","timeout","trackPointOptions","isDraw","useCanvas","stroke","color","fill","fillColor","opacity","radius","trackLineOptions","weight","shipOptions","useImg","imgUrl","width","height","toolTipOptions","offset","direction","permanent","_trackLayer","addTo","_canvas","getContainer","_ctx","getContext","_bufferTracks","_trackPointFeatureGroup","featureGroup","on","_trackLayerUpdate","_onmousemoveEvt","update","_clearLayer","forEach","_drawTrack","e","layerPoint","leni","tpoint","latLngToLayerPoint","_opentoolTip","hasLayer","_tooltip","removeLayer","style","cursor","trackpoint","tooltip","setLatLng","setContent","getTooltipText","trackpoints","_drawTrackLine","_drawShip2","_drawShip","_drawTrackPoints","_drawTrackPoints2","tp0","save","beginPath","moveTo","tpi","lineTo","globalAlpha","strokeStyle","lineWidth","fillStyle","restore","arc","cricleMarker","circleMarker","bindTooltip","addLayer","rotate","w","h","dh","translate","closePath","img","Image","onload","drawImage","src","targetobj","content","info","key","value","join","bounds","getBounds","size","getSize","clearRect","min","clearLayers","TrackLayer","Renderer","prototype","call","padding","onAdd","_container","DomUtil","create","pane","getPane","appendChild","onRemove","remove","_bounds","_animatingZoom","b","container","m","Browser","retina","setPosition","scale","fire","getTimeStrFromUnix","accuracy","isNaN","newDate","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minuts","getMinutes","seconds","getSeconds","ret","latlngTodfm","val","latlngtype","iskeepCapacity","spointCount","resobj","newval","parseFloat","positiveNum","abs","du","fen","miao","toFixed","latlngTodfmStr","res","str"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC7DA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAIA,WAAW,EAAf;AACA,IAAIC,WAAW,EAAf;;AAEAD,SAASE,KAAT;AACAF,SAASG,eAAT;AACAH,SAASI,KAAT;AACAJ,SAASK,IAAT;;AAGAJ,SAASK,KAAT;AACAL,SAASM,eAAT;AACAN,SAASO,KAAT;AACAP,SAASQ,IAAT;;AAEAT,SAASU,IAAT;;QAEQV,Q,GAAAA,Q;QAAUC,Q,GAAAA,Q;;;AAElBU,OAAOC,CAAP,CAASZ,QAAT,GAAoBA,QAApB;AACAW,OAAOC,CAAP,CAASX,QAAT,GAAoBA,QAApB,C;;;;;;;;;;;;ACzBA;;AAEO,IAAIC,wBAAQU,EAAEC,KAAF,CAAQC,MAAR,CAAe;;AAEhCC,cAAY,oBAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACtCL,MAAEM,UAAF,CAAa,IAAb,EAAmBD,OAAnB;;AAEA,SAAKE,YAAL,GAAoB,EAApB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA,QAAIJ,QAAQK,WAAR,IAAuBL,QAAQK,WAAR,CAAoBC,MAA/C,EAAuD;AACrD,WAAK,IAAIC,IAAI,CAAR,EAAWC,MAAMR,QAAQK,WAAR,CAAoBC,MAA1C,EAAkDC,IAAIC,GAAtD,EAA2DD,GAA3D,EAAgE;AAC9D;AACAP,gBAAQK,WAAR,CAAoBE,CAApB,EAAuBE,QAAvB,GAAkC,IAAlC;AACA,aAAKN,YAAL,CAAkBO,IAAlB,CAAuBV,QAAQK,WAAR,CAAoBE,CAApB,CAAvB;AACD;AACD,WAAKI,OAAL;AACD;AACF,GAf+B;;AAiBhCC,iBAAe,uBAAUC,UAAV,EAAsB;AACnCA,eAAWJ,QAAX,GAAsB,IAAtB;AACA,SAAKN,YAAL,CAAkBO,IAAlB,CAAuBG,UAAvB;AACA,SAAKF,OAAL;AACD,GArB+B;;AAuBhCG,YAAU,oBAAY;AACpB,QAAIC,QAAQ,EAAZ;AACA,SAAK,IAAIR,IAAI,CAAR,EAAWC,MAAM,KAAKL,YAAL,CAAkBG,MAAxC,EAAgDC,IAAIC,GAApD,EAAyDD,GAAzD,EAA8D;AAC5DQ,YAAML,IAAN,CAAW,KAAKP,YAAL,CAAkBI,CAAlB,EAAqBS,IAAhC;AACD;AACD,WAAOD,KAAP;AACD,GA7B+B;;AA+BhCE,sBAAoB,8BAAY;AAC9B,WAAO,KAAKd,YAAL,CAAkB,CAAlB,CAAP;AACD,GAjC+B;;AAmChCe,oBAAkB,4BAAY;AAC5B,WAAO,KAAKf,YAAL,CAAkB,KAAKA,YAAL,CAAkBG,MAAlB,GAA2B,CAA7C,CAAP;AACD,GArC+B;;AAuChCa,uBAAqB,6BAAUH,IAAV,EAAgB;AACnC,WAAO,KAAKZ,SAAL,CAAeY,IAAf,CAAP;AACD,GAzC+B;;AA2ChCI,gCAA8B,sCAAUJ,IAAV,EAAgB;AAC5C;AACA,QAAIK,WAAW,KAAKF,mBAAL,CAAyBH,IAAzB,CAAf;AACA,QAAIM,UAAU,KAAKL,kBAAL,EAAd;AACA,QAAIM,QAAQ,KAAKL,gBAAL,EAAZ;AACA,QAAIH,QAAQ,KAAKD,QAAL,EAAZ;AACA,QAAIE,OAAOM,QAAQN,IAAf,IAAuBA,OAAOO,MAAMP,IAAxC,EAA8C;AAC9C,QAAIQ,OAAO,CAAX;AACA,QAAIC,QAAQV,MAAMT,MAAN,GAAe,CAA3B;AACA,QAAIoB,CAAJ;AACA;AACA,QAAIF,SAASC,KAAb,EAAoB;AAClB,aAAOJ,QAAP;AACD;AACD,WAAOI,QAAQD,IAAR,KAAiB,CAAxB,EAA2B;AACzBE,UAAIC,SAAS,CAACH,OAAOC,KAAR,IAAiB,CAA1B,CAAJ;AACA,UAAIT,OAAOD,MAAMW,CAAN,CAAX,EAAqBF,OAAOE,CAAP,CAArB,KACKD,QAAQC,CAAR;AACN;;AAED,QAAIE,KAAKb,MAAMS,IAAN,CAAT;AACA,QAAIK,KAAKd,MAAMU,KAAN,CAAT;AACA,QAAIK,IAAId,IAAR;AACA,QAAI,CAAC,KAAKG,mBAAL,CAAyBS,EAAzB,CAAL,EAAkC;AAChCG,cAAQC,GAAR,CAAY,OAAZ;AACD;AACDV,cAAU1B,EAAEqC,KAAF,CAAQ,KAAKd,mBAAL,CAAyBS,EAAzB,EAA6BM,GAArC,EAA0C,KAAKf,mBAAL,CAAyBS,EAAzB,EAA6BO,GAAvE,CAAV;AACAZ,YAAQ3B,EAAEqC,KAAF,CAAQ,KAAKd,mBAAL,CAAyBU,EAAzB,EAA6BK,GAArC,EAA0C,KAAKf,mBAAL,CAAyBU,EAAzB,EAA6BM,GAAvE,CAAR;AACA,QAAIC,IAAId,QAAQe,UAAR,CAAmBd,KAAnB,CAAR;AACA;AACA,QAAIa,KAAK,CAAT,EAAY;AACVf,iBAAW,KAAKF,mBAAL,CAAyBU,EAAzB,CAAX;AACA,aAAOR,QAAP;AACD;AACD,QAAIiB,IAAIF,KAAKP,KAAKD,EAAV,CAAR;AACA,QAAIW,OAAO,CAAChB,MAAMiB,CAAN,GAAUlB,QAAQkB,CAAnB,IAAwBJ,CAAnC;AACA,QAAIK,OAAO,CAAClB,MAAMmB,CAAN,GAAUpB,QAAQoB,CAAnB,IAAwBN,CAAnC;AACA,QAAIO,OAAOL,KAAKR,IAAIF,EAAT,CAAX;AACA,QAAIc,IAAIpB,QAAQoB,CAAR,GAAYC,OAAOF,IAA3B;AACA,QAAID,IAAIlB,QAAQkB,CAAR,GAAYG,OAAOJ,IAA3B;AACA,QAAIK,MAAMrB,MAAMmB,CAAN,IAAWpB,QAAQoB,CAAnB,GAAuB,CAACG,KAAKC,EAAL,GAAU,GAAV,GAAgBD,KAAKE,IAAL,CAAUR,IAAV,CAAjB,IAAoC,GAApC,GAA0CM,KAAKC,EAAtE,GAA2E,CAACD,KAAKC,EAAL,GAAU,GAAV,GAAgBD,KAAKE,IAAL,CAAUR,IAAV,CAAjB,IAAoC,GAApC,GAA0CM,KAAKC,EAApI;;AAEA,QAAIzB,QAAJ,EAAc;AACZ,UAAIA,SAASuB,GAAT,KAAiBI,SAArB,EAAgC;AAAE3B,iBAASuB,GAAT,GAAeA,GAAf;AAAoB;AACvD,KAFD,MAEO;AACLvB,iBAAW;AACTa,aAAKQ,CADI;AAETP,aAAKK,CAFI;AAGTI,aAAKA,GAHI;AAITnC,kBAAU,KAJD;AAKTO,cAAMA;AALG,OAAX;AAOD;AACD,WAAOK,QAAP;AACD,GAjG+B;;AAmGhC4B,4BAA0B,kCAAUjC,IAAV,EAAgB;AACxC,QAAIkC,UAAU,EAAd;AACA,SAAK,IAAI3C,IAAI,CAAR,EAAWC,MAAM,KAAKL,YAAL,CAAkBG,MAAxC,EAAgDC,IAAIC,GAApD,EAAyDD,GAAzD,EAA8D;AAC5D,UAAI,KAAKJ,YAAL,CAAkBI,CAAlB,EAAqBS,IAArB,GAA4BA,IAAhC,EAAsC;AACpCkC,gBAAQxC,IAAR,CAAa,KAAKP,YAAL,CAAkBI,CAAlB,CAAb;AACD;AACF;AACD,QAAIgB,QAAQ,KAAKH,4BAAL,CAAkCJ,IAAlC,CAAZ;AACA,QAAIO,KAAJ,EAAW;AACT2B,cAAQxC,IAAR,CAAaa,KAAb;AACD;AACD,WAAO2B,OAAP;AACD,GA/G+B;;AAiHhCvC,WAAS,mBAAY;AACnB,SAAKwC,sBAAL;AACA,SAAKC,eAAL;AACD,GApH+B;;AAsHhCD,0BAAwB,kCAAY;AAClC,QAAI3C,MAAM,KAAKL,YAAL,CAAkBG,MAA5B;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,GAApB,EAAyBD,GAAzB,EAA8B;AAC5B,WAAK,IAAI8C,IAAI,CAAb,EAAgBA,IAAI7C,MAAM,CAAN,GAAUD,CAA9B,EAAiC8C,GAAjC,EAAsC;AACpC,YAAI,KAAKlD,YAAL,CAAkBkD,CAAlB,EAAqBrC,IAArB,GAA4B,KAAKb,YAAL,CAAkBkD,IAAI,CAAtB,EAAyBrC,IAAzD,EAA+D;AAC7D,cAAIsC,MAAM,KAAKnD,YAAL,CAAkBkD,IAAI,CAAtB,CAAV;AACA,eAAKlD,YAAL,CAAkBkD,IAAI,CAAtB,IAA2B,KAAKlD,YAAL,CAAkBkD,CAAlB,CAA3B;AACA,eAAKlD,YAAL,CAAkBkD,CAAlB,IAAuBC,GAAvB;AACD;AACF;AACF;AACF,GAjI+B;;AAmIhCF,mBAAiB,2BAAY;AAC3B,SAAKhD,SAAL,GAAiB,EAAjB;AACA,SAAK,IAAIG,IAAI,CAAR,EAAWC,MAAM,KAAKL,YAAL,CAAkBG,MAAxC,EAAgDC,IAAIC,GAApD,EAAyDD,GAAzD,EAA8D;AAC5D,WAAKH,SAAL,CAAe,KAAKD,YAAL,CAAkBI,CAAlB,EAAqBS,IAApC,IAA4C,KAAKb,YAAL,CAAkBI,CAAlB,CAA5C;AACD;AACF;AAxI+B,CAAf,CAAZ;;AA2IA,IAAIjB,wBAAQ,SAARA,KAAQ,CAAUU,OAAV,EAAmBC,OAAnB,EAA4B;AAC7C,SAAO,IAAIf,KAAJ,CAAUc,OAAV,EAAmBC,OAAnB,CAAP;AACD,CAFM,C;;;;;;;;;;;;AC7IP;;AAEO,IAAId,4CAAkBS,EAAEC,KAAF,CAAQC,MAAR,CAAe;;AAE1CC,cAAY,oBAAUwD,MAAV,EAAkB9D,IAAlB,EAAwB+D,GAAxB,EAA6BvD,OAA7B,EAAsC;AAChDL,MAAEM,UAAF,CAAa,IAAb,EAAmBD,OAAnB;;AAEA,SAAKwD,IAAL,GAAYD,GAAZ;;AAEA,SAAKE,OAAL,GAAe,EAAf;;AAEA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,QAAL,GAAgB,IAAhB;;AAEA,SAAKC,KAAL,GAAapE,IAAb;;AAEA,QAAI8D,UAAUA,OAAOjD,MAArB,EAA6B;AAC3B,WAAK,IAAIC,IAAI,CAAR,EAAWC,MAAM+C,OAAOjD,MAA7B,EAAqCC,IAAIC,GAAzC,EAA8CD,GAA9C,EAAmD;AACjD,aAAKmD,OAAL,CAAahD,IAAb,CAAkB6C,OAAOhD,CAAP,CAAlB;AACD;AACF;;AAED,SAAKI,OAAL;;AAEA,SAAKmD,cAAL;;AAEA,SAAKC,kBAAL;AACD,GAzByC;;AA2B1CC,cAAY,sBAAY;AACtB,WAAO,KAAKL,QAAZ;AACD,GA7ByC;;AA+B1CM,cAAY,sBAAY;AACtB,WAAO,KAAKL,QAAZ;AACD,GAjCyC;;AAmC1CG,sBAAoB,8BAAY;AAC9B,QAAI,KAAKL,OAAL,CAAapD,MAAjB,EAAyB;AACvB,UAAI4D,SAAS,KAAKR,OAAL,CAAa,CAAb,CAAb;AACA,UAAIS,SAASD,OAAOjD,kBAAP,EAAb;AACA,UAAIkD,MAAJ,EAAY;AACV,YAAIC,SAASxE,EAAEyE,MAAF,CAASF,OAAOhC,GAAhB,EAAqBgC,OAAOjC,GAA5B,CAAb;AACA,aAAKuB,IAAL,CAAUa,KAAV,CAAgBF,MAAhB;AACD;AACF;AACF,GA5CyC;;AA8C1CG,YAAU,kBAAUjF,KAAV,EAAiB;AACzB,QAAIA,KAAJ,EAAW;AACT,WAAKoE,OAAL,CAAahD,IAAb,CAAkBpB,KAAlB;AACA,WAAKqB,OAAL;AACD;AACF,GAnDyC;;AAqD1C6D,oBAAkB,0BAAUxD,IAAV,EAAgB;AAChC,SAAK6C,KAAL,CAAWY,KAAX;AACA,SAAK,IAAIlE,IAAI,CAAR,EAAWC,MAAM,KAAKkD,OAAL,CAAapD,MAAnC,EAA2CC,IAAIC,GAA/C,EAAoDD,GAApD,EAAyD;AACvD,UAAIjB,QAAQ,KAAKoE,OAAL,CAAanD,CAAb,CAAZ;AACA,UAAImE,MAAMpF,MAAM2D,wBAAN,CAA+BjC,IAA/B,CAAV;AACA,UAAI0D,OAAOA,IAAIpE,MAAf,EAAuB,KAAKuD,KAAL,CAAWc,SAAX,CAAqBD,GAArB;AACxB;AACF,GA5DyC;;AA8D1C/D,WAAS,mBAAY;AACnB,QAAI,KAAK+C,OAAL,CAAapD,MAAjB,EAAyB;AACvB,WAAKqD,QAAL,GAAgB,KAAKD,OAAL,CAAa,CAAb,EAAgBzC,kBAAhB,GAAqCD,IAArD;AACA,WAAK4C,QAAL,GAAgB,KAAKF,OAAL,CAAa,CAAb,EAAgBxC,gBAAhB,GAAmCF,IAAnD;AACA,WAAK,IAAIT,IAAI,CAAR,EAAWC,MAAM,KAAKkD,OAAL,CAAapD,MAAnC,EAA2CC,IAAIC,GAA/C,EAAoDD,GAApD,EAAyD;AACvD,YAAIqE,QAAQ,KAAKlB,OAAL,CAAanD,CAAb,EAAgBU,kBAAhB,GAAqCD,IAAjD;AACA,YAAI6D,QAAQ,KAAKnB,OAAL,CAAanD,CAAb,EAAgBW,gBAAhB,GAAmCF,IAA/C;AACA,YAAI4D,QAAQ,KAAKjB,QAAjB,EAA2B;AACzB,eAAKA,QAAL,GAAgBiB,KAAhB;AACD;AACD,YAAIC,QAAQ,KAAKjB,QAAjB,EAA2B;AACzB,eAAKA,QAAL,GAAgBiB,KAAhB;AACD;AACF;AACF;AACF,GA7EyC;;AA+E1Cf,kBAAgB,0BAAY;AAC1B,QAAIgB,YAAY,KAAKpB,OAAL,CAAapD,MAA7B;AACA,QAAIyE,aAAa,CAAjB;AACA,SAAK,IAAIxE,IAAI,CAAR,EAAWC,MAAMsE,SAAtB,EAAiCvE,IAAIC,GAArC,EAA0CD,GAA1C,EAA+C;AAC7CwE,oBAAc,KAAKrB,OAAL,CAAanD,CAAb,EAAgBJ,YAAhB,CAA6BG,MAA3C;AACD;AACDyB,YAAQC,GAAR,CAAY,SAAS8C,SAAT,GAAqB,KAAjC;AACA/C,YAAQC,GAAR,CAAY,SAAS+C,UAAT,GAAsB,OAAlC;AACD;;AAvFyC,CAAf,CAAtB;;AA2FA,IAAIxF,4CAAkB,SAAlBA,eAAkB,CAAUgE,MAAV,EAAkB9D,IAAlB,EAAwBQ,OAAxB,EAAiC;AAC5D,SAAO,IAAId,eAAJ,CAAoBoE,MAApB,EAA4B9D,IAA5B,EAAkCQ,OAAlC,CAAP;AACD,CAFM,C;;;;;;;;;;;;;;AC5FP;;AAEO,IAAIb,wBAAQQ,EAAEC,KAAF,CAAQC,MAAR,CAAe;;AAEhCG,WAAS;AACP+E,WAAO,EADA;AAEPC,cAAU;AAFH,GAFuB;;AAOhClF,cAAY,oBAAUR,eAAV,EAA2B2F,QAA3B,EAAqCjF,OAArC,EAA8C;AACxDL,MAAEM,UAAF,CAAa,IAAb,EAAmBD,OAAnB;AACA,SAAKkF,gBAAL,GAAwB5F,eAAxB;AACA,SAAK6F,QAAL,GAAgB,KAAKD,gBAAL,CAAsBlB,UAAtB,EAAhB;AACA,SAAKoB,QAAL,GAAgB,KAAKF,gBAAL,CAAsBnB,UAAtB,EAAhB;AACA,SAAKsB,MAAL,GAAc,KAAKrF,OAAL,CAAa+E,KAA3B;AACA,SAAKO,SAAL,GAAiB,KAAKtF,OAAL,CAAagF,QAA9B;AACA,SAAKO,SAAL,GAAiBN,YAAY,YAAY,CAAE,CAA3C;AACA,SAAKO,kBAAL,GAA0B,CAA1B;AACD,GAhB+B;;AAkBhC;AACAC,eAAa,qBAAUC,GAAV,EAAe;AAC1B,QAAIC,MAAM,QAAQD,MAAM,KAAKF,kBAAnB,CAAV;AACA,WAAOG,GAAP;AACD,GAtB+B;;AAwBhC;AACAC,mBAAiB,yBAAUF,GAAV,EAAe;AAC9B,QAAI3E,OAAO,CAAC2E,MAAM,KAAKF,kBAAZ,IAAkC,IAA7C;AACA,QAAI,KAAKA,kBAAL,KAA4B,CAAhC,EAAmC;AACjCzE,aAAO,CAAP;AACD;AACD,SAAKyE,kBAAL,GAA0BE,GAA1B;AACA,WAAO3E,IAAP;AACD,GAhC+B;;AAkChC8E,SAAO,iBAAY;AACjB,QAAIH,MAAM,CAAC,IAAII,IAAJ,EAAX;AACA,QAAIC,UAAU,KAAKH,eAAL,CAAqBF,GAArB,CAAd;AACA,QAAIM,UAAU,KAAd;AACA,QAAIC,WAAWF,UAAUnD,KAAKsD,GAAL,CAAS,CAAT,EAAY,KAAKb,MAAL,GAAc,CAA1B,CAAzB;AACA,SAAKD,QAAL,IAAiBa,QAAjB;AACA,QAAI,KAAKb,QAAL,IAAiB,KAAKD,QAA1B,EAAoC;AAClC,WAAKC,QAAL,GAAgB,KAAKD,QAArB;AACAa,gBAAU,IAAV;AACD;AACD,SAAKd,gBAAL,CAAsBX,gBAAtB,CAAuC,KAAKa,QAA5C;AACA,SAAKG,SAAL,CAAe,KAAKH,QAApB;AACA,QAAI,CAACY,OAAL,EAAc,KAAKG,WAAL,GAAmBzG,OAAO0G,qBAAP,CAA6B,KAAKP,KAAL,CAAWQ,IAAX,CAAgB,IAAhB,CAA7B,CAAnB;AACf,GA/C+B;;AAiDhCC,SAAO,iBAAY;AACjB,QAAI,KAAKH,WAAT,EAAsB;AACtB,SAAKA,WAAL,GAAmBzG,OAAO0G,qBAAP,CAA6B,KAAKP,KAAL,CAAWQ,IAAX,CAAgB,IAAhB,CAA7B,CAAnB;AACD,GApD+B;;AAsDhCE,QAAM,gBAAY;AAChB,QAAI,CAAC,KAAKJ,WAAV,EAAuB;AACvBzG,WAAO8G,oBAAP,CAA4B,KAAKL,WAAjC;AACA,SAAKA,WAAL,GAAmB,IAAnB;AACA,SAAKX,kBAAL,GAA0B,CAA1B;AACD,GA3D+B;;AA6DhCiB,aAAW,qBAAY;AACrB,SAAKF,IAAL;AACA,SAAKnB,QAAL,GAAgB,KAAKF,gBAAL,CAAsBnB,UAAtB,EAAhB;AACA,SAAKuC,KAAL;AACD,GAjE+B;;AAmEhCI,aAAW,qBAAY;AACrB,SAAKrB,MAAL,IAAe,CAAf,GAAmB,KAAKA,MAAxB,GAAiC,KAAKA,MAAL,IAAe,CAAhD;AACA,QAAI,KAAKc,WAAT,EAAsB;AACpB,WAAKI,IAAL;AACA,WAAKD,KAAL;AACD;AACF,GAzE+B;;AA2EhCK,cAAY,sBAAY;AACtB,SAAKtB,MAAL,IAAe,KAAKC,SAApB,GAAgC,KAAKD,MAArC,GAA8C,KAAKA,MAAL,IAAe,CAA7D;AACA,QAAI,KAAKc,WAAT,EAAsB;AACpB,WAAKI,IAAL;AACA,WAAKD,KAAL;AACD;AACF,GAjF+B;;AAmFhCM,YAAU,oBAAY;AACpB,WAAO,KAAKvB,MAAZ;AACD,GArF+B;;AAuFhCwB,cAAY,sBAAY;AACtB,WAAO,KAAKzB,QAAZ;AACD,GAzF+B;;AA2FhC0B,gBAAc,wBAAY;AACxB,WAAO,KAAK5B,gBAAL,CAAsBnB,UAAtB,EAAP;AACD,GA7F+B;;AA+FhCgD,cAAY,sBAAY;AACtB,WAAO,KAAK7B,gBAAL,CAAsBlB,UAAtB,EAAP;AACD,GAjG+B;;AAmGhCgD,aAAW,qBAAY;AACrB,WAAO,KAAKb,WAAL,GAAmB,CAAnB,GAAuB,CAA9B;AACD,GArG+B;;AAuGhCc,aAAW,mBAAUlG,IAAV,EAAgB;AACzB,SAAKqE,QAAL,GAAgBrE,IAAhB;AACA,SAAKmE,gBAAL,CAAsBX,gBAAtB,CAAuC,KAAKa,QAA5C;AACA,SAAKG,SAAL,CAAe,KAAKH,QAApB;AACD,GA3G+B;;AA6GhC8B,YAAU,kBAAUnC,KAAV,EAAiB;AACzB,SAAKM,MAAL,GAAcN,KAAd;AACA,QAAI,KAAKoB,WAAT,EAAsB;AACpB,WAAKI,IAAL;AACA,WAAKD,KAAL;AACD;AACF;AAnH+B,CAAf,CAAZ,C,CAHP;AAyHO,IAAI/G,wBAAQ,SAARA,KAAQ,CAAUD,eAAV,EAA2B2F,QAA3B,EAAqCjF,OAArC,EAA8C;AAC/D,SAAO,IAAIb,KAAJ,CAAUG,eAAV,EAA2B2F,QAA3B,EAAqCjF,OAArC,CAAP;AACD,CAFM,C;;;;;;;;;ACzHP;AACAN,OAAO0G,qBAAP,GACG,YAAY;AACX,MAAIe,oBAAJ;AAAA,MACEC,OADF;AAAA,MAEEnC,QAFF;AAAA,MAGEoC,eAAe,CAHjB;AAAA,MAIEC,YAAYC,UAAUD,SAJxB;AAAA,MAKEE,QAAQ,CALV;AAAA,MAMEC,OAAO,IANT;;AAQA;AACA;;AAEA,MAAI/H,OAAOgI,2BAAX,EAAwC;AACtC;;AAEAN,cAAU,iBAAUrG,IAAV,EAAgB;AACxB,UAAIA,SAASgC,SAAb,EAAwB;AACtBhC,eAAO,CAAC,IAAI+E,IAAJ,EAAR;AACD;AACD2B,WAAKxC,QAAL,CAAclE,IAAd;AACD,KALD;;AAOA;AACAoG,2BAAuBzH,OAAOgI,2BAA9B;;AAEAhI,WAAOgI,2BAAP,GAAqC,UAAUzC,QAAV,EAAoB0C,OAApB,EAA6B;AAChEF,WAAKxC,QAAL,GAAgBA,QAAhB;AACA;AACAkC,2BAAqBC,OAArB,EAA8BO,OAA9B;AACD,KAJD;AAKD;;AAED;AACA;AACA,MAAIjI,OAAOkI,wBAAX,EAAqC;AACnC;AACA;AACAJ,YAAQF,UAAUO,OAAV,CAAkB,KAAlB,CAAR;AACA,QAAIP,UAAUO,OAAV,CAAkB,OAAlB,MAA+B,CAAC,CAApC,EAAuC;AACrCR,qBAAeC,UAAUQ,MAAV,CAAiBN,QAAQ,CAAzB,EAA4B,CAA5B,CAAf;AACA,UAAIH,iBAAiB,KAArB,EAA4B;AAC1B;AACA;AACA3H,eAAOkI,wBAAP,GAAkC7E,SAAlC;AACD;AACF;AACF;;AAED,SAAOrD,OAAO0G,qBAAP,IACL1G,OAAOgI,2BADF,IAELhI,OAAOkI,wBAFF,IAGLlI,OAAOqI,sBAHF,IAILrI,OAAOsI,uBAJF,IAML,UAAU/C,QAAV,EAAoB0C,OAApB,EAA6B;AAC3B,QAAIrB,KAAJ,EAAW2B,MAAX;AACAvI,WAAOwI,UAAP,CAAkB,YAAY;AAC5B5B,cAAQ,CAAC,IAAIR,IAAJ,EAAT;AACAb,eAASqB,KAAT;AACA2B,eAAS,CAAC,IAAInC,IAAJ,EAAV;AACA2B,WAAKU,OAAL,GAAe,OAAO,EAAP,IAAaF,SAAS3B,KAAtB,CAAf;AACD,KALD,EAKGmB,KAAKU,OALR;AAMD,GAdH;AAeD,CA/DA,EADH,C;;;;;;;;;;;;;;ACAA;;AAEO,IAAI/I,sBAAOO,EAAEC,KAAF,CAAQC,MAAR,CAAe;;AAE7BuI,qBAAmB;AACjBC,YAAQ,KADS;AAEjBC,eAAW,IAFM;AAGjBC,YAAQ,KAHS;AAIjBC,WAAO,SAJU;AAKjBC,UAAM,IALW;AAMjBC,eAAW,SANM;AAOjBC,aAAQ,GAPS;AAQjBC,YAAQ;AARS,GAFU;AAY7BC,oBAAkB;AAChBR,YAAQ,KADQ;AAEhBE,YAAQ,IAFQ;AAGhBC,WAAO,SAHS,EAGE;AAClBM,YAAQ,CAJQ;AAKhBL,UAAM,KALU;AAMhBC,eAAW,MANK;AAOhBC,aAAQ;AAPQ,GAZW;AAqB7BI,eAAa;AACXC,YAAQ,KADG;AAEXC,YAAQ,8BAFG;AAGXC,WAAO,CAHI;AAIXC,YAAQ,EAJG;AAKXX,WAAO,MALI,EAKI;AACfE,eAAW;AANA,GArBgB;AA6B7BU,kBAAgB;AACdC,YAAQ,CAAC,CAAD,EAAI,CAAJ,CADM;AAEdC,eAAW,KAFG;AAGdC,eAAW;AAHG,GA7Ba;;AAmC/BzJ,cAAY,oBAAUyD,GAAV,EAAevD,OAAf,EAAwB;AAClC;AACA,SAAKoI,iBAAL,GAAyBzI,EAAEE,MAAF,CAAS,KAAKuI,iBAAd,EAAiCpI,QAAQoI,iBAAzC,CAAzB;AACA,SAAKS,gBAAL,GAAwBlJ,EAAEE,MAAF,CAAS,KAAKgJ,gBAAd,EAAgC7I,QAAQ6I,gBAAxC,CAAxB;AACA,SAAKE,WAAL,GAAmBpJ,EAAEE,MAAF,CAAS,KAAKkJ,WAAd,EAA2B/I,QAAQ+I,WAAnC,CAAnB;AACA,SAAKK,cAAL,GAAsBzJ,EAAEE,MAAF,CAAS,KAAKuJ,cAAd,EAA8BpJ,QAAQoJ,cAAtC,CAAtB;AACA,SAAK5F,IAAL,GAAYD,GAAZ;AACA,SAAKiG,WAAL,GAAmB,6BAAiBC,KAAjB,CAAuBlG,GAAvB,CAAnB;AACA,SAAKmG,OAAL,GAAe,KAAKF,WAAL,CAAiBG,YAAjB,EAAf;AACA,SAAKC,IAAL,GAAY,KAAKF,OAAL,CAAaG,UAAb,CAAwB,IAAxB,CAAZ;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,uBAAL,GAA+BpK,EAAEqK,YAAF,CAAe,EAAf,EAAmBP,KAAnB,CAAyBlG,GAAzB,CAA/B;;AAEA,SAAKiG,WAAL,CAAiBS,EAAjB,CAAoB,QAApB,EAA8B,KAAKC,iBAAnC,EAAsD,IAAtD;AACA,SAAK1G,IAAL,CAAUyG,EAAV,CAAa,WAAb,EAA0B,KAAKE,eAA/B,EAAgD,IAAhD;AACD,GAlD8B;;AAoD/BC,UAAQ,kBAAY;AAClB,SAAKF,iBAAL;AACD,GAtD8B;;AAwD/BA,qBAAmB,6BAAY;AAC7B,QAAI,KAAKJ,aAAL,CAAmBzJ,MAAvB,EAA+B;AAC7B,WAAKgK,WAAL;AACA,WAAKP,aAAL,CAAmBQ,OAAnB,CAA2B,UAAU3C,OAAV,EAAmBH,KAAnB,EAA0B;AACnD,aAAK+C,UAAL,CAAgB5C,OAAhB,EAAyB,KAAzB;AACD,OAF0B,CAEzBtB,IAFyB,CAEpB,IAFoB,CAA3B;AAGD;AACF,GA/D8B;;AAiE/B8D,mBAAiB,yBAAUK,CAAV,EAAa;AAC5B,QAAI,CAAC,KAAKpC,iBAAL,CAAuBC,MAA5B,EAAoC;AAClC;AACD;AACD,QAAIrG,QAAQwI,EAAEC,UAAd;AACA,QAAI,KAAKX,aAAL,CAAmBzJ,MAAvB,EAA+B;AAC7B,WAAK,IAAIC,IAAI,CAAR,EAAWoK,OAAO,KAAKZ,aAAL,CAAmBzJ,MAA1C,EAAkDC,IAAIoK,IAAtD,EAA4DpK,GAA5D,EAAiE;AAC/D,aAAK,IAAI8C,IAAI,CAAR,EAAW7C,MAAM,KAAKuJ,aAAL,CAAmBxJ,CAAnB,EAAsBD,MAA5C,EAAoD+C,IAAI7C,GAAxD,EAA6D6C,GAA7D,EAAkE;AAChE,cAAIuH,SAAS,KAAKnH,IAAL,CAAUoH,kBAAV,CAA6BjL,EAAEyE,MAAF,CAAS,KAAK0F,aAAL,CAAmBxJ,CAAnB,EAAsB8C,CAAtB,EAAyBlB,GAAlC,EAAuC,KAAK4H,aAAL,CAAmBxJ,CAAnB,EAAsB8C,CAAtB,EAAyBnB,GAAhE,CAA7B,CAAb;AACA,cAAID,MAAMI,UAAN,CAAiBuI,MAAjB,KAA4B,KAAKvC,iBAAL,CAAuBQ,MAAvD,EAA+D;AAC7D,iBAAKiC,YAAL,CAAkB,KAAKf,aAAL,CAAmBxJ,CAAnB,EAAsB8C,CAAtB,CAAlB;AACA;AACD;AACF;AACF;AACF;AACD,QAAI,KAAKI,IAAL,CAAUsH,QAAV,CAAmB,KAAKC,QAAxB,CAAJ,EAAuC;AACrC,WAAKvH,IAAL,CAAUwH,WAAV,CAAsB,KAAKD,QAA3B;AACD;AACD,SAAKrB,OAAL,CAAauB,KAAb,CAAmBC,MAAnB,GAA4B,SAA5B;AACD,GArF8B;;AAuF/BL,gBAAc,sBAAUM,UAAV,EAAsB;AAClC,QAAI,KAAK3H,IAAL,CAAUsH,QAAV,CAAmB,KAAKC,QAAxB,CAAJ,EAAuC;AACrC,WAAKvH,IAAL,CAAUwH,WAAV,CAAsB,KAAKD,QAA3B;AACD;AACD,SAAKrB,OAAL,CAAauB,KAAb,CAAmBC,MAAnB,GAA4B,SAA5B;AACA,QAAI/G,SAASxE,EAAEyE,MAAF,CAAS+G,WAAWjJ,GAApB,EAAyBiJ,WAAWlJ,GAApC,CAAb;AACA,QAAImJ,UAAU,KAAKL,QAAL,GAAgBpL,EAAEyL,OAAF,CAAU,KAAKhC,cAAf,CAA9B;AACAgC,YAAQC,SAAR,CAAkBlH,MAAlB;AACAiH,YAAQ3B,KAAR,CAAc,KAAKjG,IAAnB;AACA4H,YAAQE,UAAR,CAAmB,KAAKC,cAAL,CAAoBJ,UAApB,CAAnB;AACD,GAjG8B;;AAmG/BZ,cAAY,oBAAUiB,WAAV,EAAuB;AACjC;AACA,QAAI,KAAK3C,gBAAL,CAAsBR,MAA1B,EAAkC;AAChC,WAAKoD,cAAL,CAAoBD,WAApB;AACD;AACD;AACA,QAAI,KAAKzC,WAAL,CAAiBC,MAArB,EAA6B;AAC3B,WAAK0C,UAAL,CAAgBF,YAAYA,YAAYnL,MAAZ,GAAqB,CAAjC,CAAhB;AACD,KAFD,MAEO;AACL,WAAKsL,SAAL,CAAeH,YAAYA,YAAYnL,MAAZ,GAAqB,CAAjC,CAAf;AACD;AACD;AACA,QAAI,KAAK+H,iBAAL,CAAuBC,MAA3B,EAAmC;AACjC,UAAI,KAAKD,iBAAL,CAAuBE,SAA3B,EAAsC;AACpC,aAAKsD,gBAAL,CAAsBJ,WAAtB;AACD,OAFD,MAEO;AACL,aAAKK,iBAAL,CAAuBL,WAAvB;AACD;AACF;AACF,GAtH8B;;AAwH/B9G,aAAW,mBAAU8G,WAAV,EAAuB;AAChC,SAAK1B,aAAL,CAAmBrJ,IAAnB,CAAwB+K,WAAxB;AACA,SAAKjB,UAAL,CAAgBiB,WAAhB;AACD,GA3H8B;;AA6H/BC,kBAAgB,wBAAUD,WAAV,EAAuB;AACrC,QAAIxL,UAAU,KAAK6I,gBAAnB;AACA,QAAIiD,MAAM,KAAKtI,IAAL,CAAUoH,kBAAV,CAA6BjL,EAAEyE,MAAF,CAASoH,YAAY,CAAZ,EAAetJ,GAAxB,EAA6BsJ,YAAY,CAAZ,EAAevJ,GAA5C,CAA7B,CAAV;AACA,SAAK2H,IAAL,CAAUmC,IAAV;AACA,SAAKnC,IAAL,CAAUoC,SAAV;AACA;AACA,SAAKpC,IAAL,CAAUqC,MAAV,CAAiBH,IAAIrJ,CAArB,EAAwBqJ,IAAIvJ,CAA5B;AACA,SAAK,IAAIjC,IAAI,CAAR,EAAWC,MAAMiL,YAAYnL,MAAlC,EAA0CC,IAAIC,GAA9C,EAAmDD,GAAnD,EAAwD;AACtD,UAAI4L,MAAM,KAAK1I,IAAL,CAAUoH,kBAAV,CAA6BjL,EAAEyE,MAAF,CAASoH,YAAYlL,CAAZ,EAAe4B,GAAxB,EAA6BsJ,YAAYlL,CAAZ,EAAe2B,GAA5C,CAA7B,CAAV;AACA,WAAK2H,IAAL,CAAUuC,MAAV,CAAiBD,IAAIzJ,CAArB,EAAwByJ,IAAI3J,CAA5B;AACD;AACD,SAAKqH,IAAL,CAAUwC,WAAV,GAAwBpM,QAAQ2I,OAAhC;AACA,QAAI3I,QAAQuI,MAAZ,EAAoB;AAClB,WAAKqB,IAAL,CAAUyC,WAAV,GAAwBrM,QAAQwI,KAAhC;AACA,WAAKoB,IAAL,CAAU0C,SAAV,GAAsBtM,QAAQ8I,MAA9B;AACA,WAAKc,IAAL,CAAUrB,MAAV;AACD;AACD,QAAIvI,QAAQyI,IAAZ,EAAkB;AAChB,WAAKmB,IAAL,CAAU2C,SAAV,GAAsBvM,QAAQ0I,SAA9B;AACA,WAAKkB,IAAL,CAAUnB,IAAV;AACD;AACD,SAAKmB,IAAL,CAAU4C,OAAV;AACD,GAnJ8B;;AAqJ/BZ,oBAAkB,0BAAUJ,WAAV,EAAuB;AACvC,QAAIxL,UAAU,KAAKoI,iBAAnB;AACA,SAAKwB,IAAL,CAAUmC,IAAV;AACA,SAAK,IAAIzL,IAAI,CAAR,EAAWC,MAAMiL,YAAYnL,MAAlC,EAA0CC,IAAIC,GAA9C,EAAmDD,GAAnD,EAAwD;AACtD,UAAIkL,YAAYlL,CAAZ,EAAeE,QAAnB,EAA6B;AAC3B,YAAI4D,SAASzE,EAAEyE,MAAF,CAASoH,YAAYlL,CAAZ,EAAe4B,GAAxB,EAA6BsJ,YAAYlL,CAAZ,EAAe2B,GAA5C,CAAb;AACA,YAAI2G,SAAS5I,QAAQ4I,MAArB;AACA,YAAI5G,QAAQ,KAAKwB,IAAL,CAAUoH,kBAAV,CAA6BxG,MAA7B,CAAZ;AACA,aAAKwF,IAAL,CAAUoC,SAAV;AACA,aAAKpC,IAAL,CAAU6C,GAAV,CAAczK,MAAMS,CAApB,EAAuBT,MAAMO,CAA7B,EAAgCqG,MAAhC,EAAwC,CAAxC,EAA2ChG,KAAKC,EAAL,GAAU,CAArD,EAAwD,KAAxD;AACA,aAAK+G,IAAL,CAAUwC,WAAV,GAAwBpM,QAAQ2I,OAAhC;AACA,YAAI3I,QAAQuI,MAAZ,EAAoB;AAClB,eAAKqB,IAAL,CAAUyC,WAAV,GAAwBrM,QAAQwI,KAAhC;AACA,eAAKoB,IAAL,CAAUrB,MAAV;AACD;AACD,YAAIvI,QAAQyI,IAAZ,EAAkB;AAChB,eAAKmB,IAAL,CAAU2C,SAAV,GAAsBvM,QAAQ0I,SAA9B;AACA,eAAKkB,IAAL,CAAUnB,IAAV;AACD;AACF;AACF;AACD,SAAKmB,IAAL,CAAU4C,OAAV;AACD,GA3K8B;;AA6K/BX,qBAAmB,2BAAUL,WAAV,EAAuB;AACxC,SAAK,IAAIlL,IAAI,CAAR,EAAWC,MAAMiL,YAAYnL,MAAlC,EAA0CC,IAAIC,GAA9C,EAAmDD,GAAnD,EAAwD;AACtD,UAAIkL,YAAYlL,CAAZ,EAAeE,QAAnB,EAA6B;AAC3B,YAAI4D,SAASzE,EAAEyE,MAAF,CAASoH,YAAYlL,CAAZ,EAAe4B,GAAxB,EAA6BsJ,YAAYlL,CAAZ,EAAe2B,GAA5C,CAAb;AACA,YAAIyK,eAAe/M,EAAEgN,YAAF,CAAevI,MAAf,EAAuB,KAAKgE,iBAA5B,CAAnB;AACAsE,qBAAaE,WAAb,CAAyB,KAAKrB,cAAL,CAAoBC,YAAYlL,CAAZ,CAApB,CAAzB,EAA8D,KAAK8I,cAAnE;AACA,aAAKW,uBAAL,CAA6B8C,QAA7B,CAAsCH,YAAtC;AACD;AACF;AACF,GAtL8B;;AAwL/Bf,aAAW,mBAAUR,UAAV,EAAsB;AAC/B,QAAInJ,QAAQ,KAAKwB,IAAL,CAAUoH,kBAAV,CAA6BjL,EAAEyE,MAAF,CAAS+G,WAAWjJ,GAApB,EAAyBiJ,WAAWlJ,GAApC,CAA7B,CAAZ;AACA,QAAI6K,SAAS3B,WAAWxI,GAAX,IAAkB,CAA/B;AACA,QAAIoK,IAAI,KAAKhE,WAAL,CAAiBG,KAAzB;AACA,QAAI8D,IAAI,KAAKjE,WAAL,CAAiBI,MAAzB;AACA,QAAI8D,KAAKD,IAAI,CAAb;;AAEA,SAAKpD,IAAL,CAAUmC,IAAV;AACA,SAAKnC,IAAL,CAAU2C,SAAV,GAAsB,KAAKxD,WAAL,CAAiBL,SAAvC;AACA,SAAKkB,IAAL,CAAUyC,WAAV,GAAwB,KAAKtD,WAAL,CAAiBP,KAAzC;AACA,SAAKoB,IAAL,CAAUsD,SAAV,CAAoBlL,MAAMS,CAA1B,EAA6BT,MAAMO,CAAnC;AACA,SAAKqH,IAAL,CAAUkD,MAAV,CAAkBlK,KAAKC,EAAL,GAAU,GAAX,GAAkBiK,MAAnC;AACA,SAAKlD,IAAL,CAAUoC,SAAV;AACA,SAAKpC,IAAL,CAAUqC,MAAV,CAAiB,CAAjB,EAAoB,IAAIe,IAAI,CAA5B;AACA,SAAKpD,IAAL,CAAUuC,MAAV,CAAiB,IAAIY,IAAI,CAAzB,EAA4B,IAAIC,IAAI,CAAR,GAAYC,EAAxC;AACA,SAAKrD,IAAL,CAAUuC,MAAV,CAAiB,IAAIY,IAAI,CAAzB,EAA4B,IAAIC,IAAI,CAApC;AACA,SAAKpD,IAAL,CAAUuC,MAAV,CAAiB,IAAIY,IAAI,CAAzB,EAA4B,IAAIC,IAAI,CAApC;AACA,SAAKpD,IAAL,CAAUuC,MAAV,CAAiB,IAAIY,IAAI,CAAzB,EAA4B,IAAIC,IAAI,CAAR,GAAYC,EAAxC;AACA,SAAKrD,IAAL,CAAUuD,SAAV;AACA,SAAKvD,IAAL,CAAUnB,IAAV;AACA,SAAKmB,IAAL,CAAUrB,MAAV;AACA,SAAKqB,IAAL,CAAU4C,OAAV;AACD,GA9M8B;;AAgN/Bd,cAAY,oBAAUP,UAAV,EAAsB;AAChC,QAAInJ,QAAQ,KAAKwB,IAAL,CAAUoH,kBAAV,CAA6BjL,EAAEyE,MAAF,CAAS+G,WAAWjJ,GAApB,EAAyBiJ,WAAWlJ,GAApC,CAA7B,CAAZ;AACA,QAAIU,MAAMwI,WAAWxI,GAAX,IAAkB,CAA5B;AACA,QAAIuG,QAAQ,KAAKH,WAAL,CAAiBG,KAA7B;AACA,QAAIC,SAAS,KAAKJ,WAAL,CAAiBI,MAA9B;AACA,QAAIE,SAAS;AACX5G,SAAGyG,QAAQ,CADA;AAEX3G,SAAG4G,SAAS;AAFD,KAAb;AAIA,QAAIiE,MAAM,IAAIC,KAAJ,EAAV;AACAD,QAAIE,MAAJ,GAAa,YAAY;AACvB,WAAK1D,IAAL,CAAUmC,IAAV;AACA,WAAKnC,IAAL,CAAUsD,SAAV,CAAoBlL,MAAMS,CAA1B,EAA6BT,MAAMO,CAAnC;AACA,WAAKqH,IAAL,CAAUkD,MAAV,CAAkBlK,KAAKC,EAAL,GAAU,GAAX,GAAkBF,GAAnC;AACA,WAAKiH,IAAL,CAAU2D,SAAV,CAAoBH,GAApB,EAAyB,IAAI/D,OAAO5G,CAApC,EAAuC,IAAI4G,OAAO9G,CAAlD,EAAqD2G,KAArD,EAA4DC,MAA5D;AACA,WAAKS,IAAL,CAAU4C,OAAV;AACD,KANY,CAMXnG,IANW,CAMN,IANM,CAAb;AAOA+G,QAAII,GAAJ,GAAU,KAAKzE,WAAL,CAAiBE,MAA3B;AACD,GAlO8B;;AAoO/BsC,kBAAgB,wBAAUkC,SAAV,EAAqB;AACnC,QAAIC,UAAU,EAAd;AACAA,YAAQjN,IAAR,CAAa,SAAb;AACA,QAAIgN,UAAUE,IAAV,IAAkBF,UAAUE,IAAV,CAAetN,MAArC,EAA6C;AAC3C,WAAK,IAAIC,IAAI,CAAR,EAAWC,MAAMkN,UAAUE,IAAV,CAAetN,MAArC,EAA6CC,IAAIC,GAAjD,EAAsDD,GAAtD,EAA2D;AACzDoN,gBAAQjN,IAAR,CAAa,MAAb;AACAiN,gBAAQjN,IAAR,CAAa,SAASgN,UAAUE,IAAV,CAAerN,CAAf,EAAkBsN,GAA3B,GAAiC,OAA9C;AACAF,gBAAQjN,IAAR,CAAa,SAASgN,UAAUE,IAAV,CAAerN,CAAf,EAAkBuN,KAA3B,GAAmC,OAAhD;AACAH,gBAAQjN,IAAR,CAAa,OAAb;AACD;AACF;AACDiN,YAAQjN,IAAR,CAAa,UAAb;AACAiN,cAAUA,QAAQI,IAAR,CAAa,EAAb,CAAV;AACA,WAAOJ,OAAP;AACD,GAlP8B;;AAoP/B1C,eAAa,uBAAY;AACvB,QAAI,KAAKxH,IAAL,CAAUsH,QAAV,CAAmB,KAAKtB,WAAxB,CAAJ,EAA0C;AACxC,WAAKhG,IAAL,CAAUwH,WAAV,CAAsB,KAAKxB,WAA3B;AACD;AACD,QAAI,KAAKhG,IAAL,CAAUsH,QAAV,CAAmB,KAAKf,uBAAxB,CAAJ,EAAsD;AACpD,WAAKvG,IAAL,CAAUwH,WAAV,CAAsB,KAAKjB,uBAA3B;AACD;AACF,GA3P8B;;AA6P/BM,eAAa,uBAAY;AACvB,QAAI0D,SAAS,KAAKvE,WAAL,CAAiBwE,SAAjB,EAAb;AACA,QAAID,MAAJ,EAAY;AACV,UAAIE,OAAOF,OAAOG,OAAP,EAAX;AACA,WAAKtE,IAAL,CAAUuE,SAAV,CAAoBJ,OAAOK,GAAP,CAAW3L,CAA/B,EAAkCsL,OAAOK,GAAP,CAAW7L,CAA7C,EAAgD0L,KAAKxL,CAArD,EAAwDwL,KAAK1L,CAA7D;AACD,KAHD,MAGO;AACL,WAAKqH,IAAL,CAAUuE,SAAV,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,KAAKzE,OAAL,CAAaR,KAAvC,EAA8C,KAAKQ,OAAL,CAAaP,MAA3D;AACD;AACD,QAAI,KAAK3F,IAAL,CAAUsH,QAAV,CAAmB,KAAKf,uBAAxB,CAAJ,EAAsD;AACpD,WAAKA,uBAAL,CAA6BsE,WAA7B;AACD;AACF,GAxQ8B;;AA0Q/B7J,SAAO,iBAAY;AACjB,SAAK6F,WAAL;AACA,SAAKP,aAAL,GAAqB,EAArB;AACD;AA7Q8B,CAAf,CAAX,C,CAHP;AAmRO,IAAItK,sBAAO,SAAPA,IAAO,CAAU+D,GAAV,EAAevD,OAAf,EAAwB;AACxC,SAAO,IAAIZ,IAAJ,CAASmE,GAAT,EAAcvD,OAAd,CAAP;AACD,CAFM,C;;;;;;;;;;;;ACnRP;;AAEO,IAAIsO,kCAAa3O,EAAE4O,QAAF,CAAW1O,MAAX,CAAkB;;AAExCC,cAAY,oBAAUE,OAAV,EAAmB;AAC7BL,MAAE4O,QAAF,CAAWC,SAAX,CAAqB1O,UAArB,CAAgC2O,IAAhC,CAAqC,IAArC,EAA2CzO,OAA3C;AACA,SAAKA,OAAL,CAAa0O,OAAb,GAAuB,GAAvB;AACD,GALuC;;AAOxCC,SAAO,eAAUpL,GAAV,EAAe;AACpB,SAAKqL,UAAL,GAAkBjP,EAAEkP,OAAF,CAAUC,MAAV,CAAiB,QAAjB,EAA2B,uBAA3B,CAAlB;AACA;;AAEA,QAAIC,OAAOxL,IAAIyL,OAAJ,CAAY,KAAKhP,OAAL,CAAa+O,IAAzB,CAAX;AACAA,SAAKE,WAAL,CAAiB,KAAKL,UAAtB;;AAEA,SAAKhF,IAAL,GAAY,KAAKgF,UAAL,CAAgB/E,UAAhB,CAA2B,IAA3B,CAAZ;;AAEA,SAAKnJ,OAAL;AACD,GAjBuC;;AAmBxCwO,YAAU,kBAAU3L,GAAV,EAAe;AACvB5D,MAAEkP,OAAF,CAAUM,MAAV,CAAiB,KAAKP,UAAtB;AACD,GArBuC;;AAuBxCjF,gBAAc,wBAAY;AACxB,WAAO,KAAKiF,UAAZ;AACD,GAzBuC;;AA2BxCZ,aAAW,qBAAY;AACrB,WAAO,KAAKoB,OAAZ;AACD,GA7BuC;;AA+BxC1O,WAAS,mBAAY;AACnB,QAAI,KAAK8C,IAAL,CAAU6L,cAAV,IAA4B,KAAKD,OAArC,EAA8C;AAC5C;AACD;;AAEDzP,MAAE4O,QAAF,CAAWC,SAAX,CAAqB9N,OAArB,CAA6B+N,IAA7B,CAAkC,IAAlC;;AAEA,QAAIa,IAAI,KAAKF,OAAb;AAAA,QACEG,YAAY,KAAKX,UADnB;AAAA,QAEEX,OAAOqB,EAAEpB,OAAF,EAFT;AAAA,QAGEsB,IAAI7P,EAAE8P,OAAF,CAAUC,MAAV,GAAmB,CAAnB,GAAuB,CAH7B;;AAKA/P,MAAEkP,OAAF,CAAUc,WAAV,CAAsBJ,SAAtB,EAAiCD,EAAElB,GAAnC;;AAEA;AACAmB,cAAUrG,KAAV,GAAkBsG,IAAIvB,KAAKxL,CAA3B;AACA8M,cAAUpG,MAAV,GAAmBqG,IAAIvB,KAAK1L,CAA5B;AACAgN,cAAUtE,KAAV,CAAgB/B,KAAhB,GAAwB+E,KAAKxL,CAAL,GAAS,IAAjC;AACA8M,cAAUtE,KAAV,CAAgB9B,MAAhB,GAAyB8E,KAAK1L,CAAL,GAAS,IAAlC;;AAEA,QAAI5C,EAAE8P,OAAF,CAAUC,MAAd,EAAsB;AACpB,WAAK9F,IAAL,CAAUgG,KAAV,CAAgB,CAAhB,EAAmB,CAAnB;AACD;;AAED;AACA,SAAKhG,IAAL,CAAUsD,SAAV,CAAoB,CAACoC,EAAElB,GAAF,CAAM3L,CAA3B,EAA8B,CAAC6M,EAAElB,GAAF,CAAM7L,CAArC;;AAEA;AACA,SAAKsN,IAAL,CAAU,QAAV;AACD;AA5DuC,CAAlB,CAAjB,C;;;;;;;;;;;;ACFA,IAAIpQ,sBAAO;AAChB;;;;;;AAMAqQ,sBAAoB,4BAAU/O,IAAV,EAAgBgP,QAAhB,EAA0B;AAC5CA,eAAWA,YAAY,GAAvB;AACAhP,WAAOW,SAASX,OAAO,IAAhB,CAAP;AACA,QAAIiP,MAAMjP,IAAN,CAAJ,EAAiB;AACf,aAAO,EAAP;AACD;AACD,QAAIkP,UAAU,IAAInK,IAAJ,CAAS/E,IAAT,CAAd;AACA,QAAImP,OAAOD,QAAQE,WAAR,EAAX;AACA,QAAIC,QAASH,QAAQI,QAAR,KAAqB,CAAtB,GAA2B,EAA3B,GAAgC,OAAOJ,QAAQI,QAAR,KAAqB,CAA5B,CAAhC,GAAiEJ,QAAQI,QAAR,KAAqB,CAAlG;AACA,QAAIC,MAAML,QAAQM,OAAR,KAAoB,EAApB,GAAyB,MAAMN,QAAQM,OAAR,EAA/B,GAAmDN,QAAQM,OAAR,EAA7D;AACA,QAAIC,QAAQP,QAAQQ,QAAR,KAAqB,EAArB,GAA0B,MAAMR,QAAQQ,QAAR,EAAhC,GAAqDR,QAAQQ,QAAR,EAAjE;AACA,QAAIC,SAAST,QAAQU,UAAR,KAAuB,EAAvB,GAA4B,MAAMV,QAAQU,UAAR,EAAlC,GAAyDV,QAAQU,UAAR,EAAtE;AACA,QAAIC,UAAUX,QAAQY,UAAR,KAAuB,EAAvB,GAA4B,MAAMZ,QAAQY,UAAR,EAAlC,GAAyDZ,QAAQY,UAAR,EAAvE;AACA,QAAId,aAAa,GAAjB,EAAsB;AACnB,UAAIe,MAAMZ,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAArC;AACF,KAFD,MAEO,IAAIP,aAAa,GAAjB,EAAsB;AAC1B,UAAIe,MAAMZ,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAA3B,GAAiC,GAAjC,GAAuCE,KAAjD;AACD,KAFK,MAEC,IAAIT,aAAa,GAAjB,EAAsB;AAC3B,UAAIe,MAAMZ,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAA3B,GAAiC,GAAjC,GAAuCE,KAAvC,GAA+C,GAA/C,GAAqDE,MAA/D;AACD,KAFM,MAEA;AACL,UAAII,MAAMZ,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAA3B,GAAiC,GAAjC,GAAuCE,KAAvC,GAA+C,GAA/C,GAAqDE,MAArD,GAA8D,GAA9D,GAAoEE,OAA9E;AACD;AACF,WAAOE,GAAP;AACD,GA9Be;;AAgChBC,eAAa,qBAAUC,GAAV,EAAeC,UAAf,EAA2BC,cAA3B,EAA2CC,WAA3C,EAAwD;AACnE,QAAIC,SAAS,EAAb;AACA,QAAIzO,GAAJ;AACA,QAAI0O,SAASC,WAAWN,GAAX,CAAb;AACA,QAAIO,cAAc3O,KAAK4O,GAAL,CAASH,MAAT,CAAlB;AACA,QAAII,KAAK/P,SAAS6P,WAAT,CAAT;AACA,QAAIG,MAAMhQ,SAAS6P,cAAc,EAAvB,IAA6BE,KAAK,EAA5C;AACA,QAAIE,OAAOJ,cAAc,EAAd,GAAmB,EAAnB,GAAwBG,MAAM,EAA9B,GAAmCD,KAAK,EAAL,GAAU,EAAxD;AACA,QAAI,OAAON,WAAP,KAAuB,WAAvB,IAAsCA,eAAe,CAAzD,EAA4D;AAAEA,oBAAc,CAAd;AAAkB;AAChF,QAAIA,gBAAgB,CAApB,EAAuB;AACrBQ,aAAOjQ,SAASiQ,IAAT,CAAP;AACD,KAFD,MAEO;AACLA,aAAOA,KAAKC,OAAL,CAAaT,WAAb,CAAP;AACD;AACD,QAAI,OAAOD,cAAP,KAA0B,WAA9B,EAA2C;AAAEA,uBAAiB,IAAjB;AAAwB;AACrE,QAAIA,cAAJ,EAAoB;AAClB,UAAID,eAAe,KAAnB,EAA0B;AACxB,YAAIQ,KAAK,EAAT,EAAaA,KAAK,OAAOA,EAAZ;AACb,YAAIA,MAAM,EAAN,IAAYA,KAAK,GAArB,EAA0BA,KAAK,MAAMA,EAAX;AAC3B,OAHD,MAGO;AACL,YAAIA,KAAK,EAAT,EAAaA,KAAK,MAAMA,EAAX;AACd;AACD;AACA;AACD;AACD,QAAIR,eAAe,KAAnB,EAA0B;AACxB,UAAII,SAAS,CAAb,EAAgB1O,MAAM,GAAN,CAAhB,KACKA,MAAM,GAAN;AACN;AACD,QAAIsO,eAAe,KAAnB,EAA0B;AACxB,UAAII,SAAS,CAAb,EAAgB1O,MAAM,GAAN,CAAhB,KACKA,MAAM,GAAN;AACN;AACDyO,WAAO3Q,IAAP,CAAYgR,EAAZ,EAAgBC,GAAhB,EAAqBC,IAArB,EAA2BhP,GAA3B;AACA,WAAOyO,MAAP;AACD,GAnEe;;AAqEhBS,kBAAgB,wBAAUb,GAAV,EAAeC,UAAf,EAA2BE,WAA3B,EAAwC;AACtD,QAAIW,MAAM,KAAKf,WAAL,CAAiBC,GAAjB,EAAsBC,UAAtB,EAAkCE,WAAlC,CAAV;AACA,QAAIY,MAAMD,IAAI,CAAJ,IAAS,GAAT,GAAeA,IAAI,CAAJ,CAAf,GAAwB,GAAxB,GAA8BA,IAAI,CAAJ,CAA9B,GAAuC,GAAvC,GAA6CA,IAAI,CAAJ,CAA7C,GAAsD,GAAhE;AACA,WAAOC,GAAP;AACD;AAzEe,CAAX,C","file":"leafletPlayback.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"leafletPlayback\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"leafletPlayback\"] = factory();\n\telse\n\t\troot[\"leafletPlayback\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 22739740b6c15c02508c","import {Track, track} from './track'\r\nimport {TrackController, trackController} from './trackcontroller'\r\nimport {Clock, clock} from './clock'\r\nimport {Draw, draw} from './draw'\r\nimport {Util} from './util'\r\n\r\nvar PlayBack = {}\r\nvar playback = {}\r\n\r\nPlayBack.Track = Track\r\nPlayBack.TrackController = TrackController\r\nPlayBack.Clock = Clock\r\nPlayBack.Draw = Draw\r\n\r\n\r\nplayback.track = track\r\nplayback.trackController = trackController\r\nplayback.clock = clock\r\nplayback.draw = draw\r\n\r\nPlayBack.Util = Util\r\n\r\nexport {PlayBack, playback}\r\n\r\nwindow.L.PlayBack = PlayBack\r\nwindow.L.playback = playback\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/index.js","// import L from 'leaflet'\r\n\r\nexport var Track = L.Class.extend({\r\n\r\n  initialize: function (dataObj, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._trackPoints = []\r\n    this._timeTick = {}\r\n    if (dataObj.timePosList && dataObj.timePosList.length) {\r\n      for (let i = 0, len = dataObj.timePosList.length; i < len; i++) {\r\n        // isOrigin标记是否属于原始点\r\n        dataObj.timePosList[i].isOrigin = true\r\n        this._trackPoints.push(dataObj.timePosList[i])\r\n      }\r\n      this._update()\r\n    }\r\n  },\r\n\r\n  addTrackPoint: function (trackPoint) {\r\n    trackPoint.isOrigin = true\r\n    this._trackPoints.push(trackPoint)\r\n    this._update()\r\n  },\r\n\r\n  getTimes: function () {\r\n    var times = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      times.push(this._trackPoints[i].time)\r\n    }\r\n    return times;\r\n  },\r\n\r\n  getStartTrackPoint: function () {\r\n    return this._trackPoints[0]\r\n  },\r\n\r\n  getEndTrackPoint: function () {\r\n    return this._trackPoints[this._trackPoints.length - 1]\r\n  },\r\n\r\n  getTrackPointByTime: function (time) {\r\n    return this._timeTick[time]\r\n  },\r\n\r\n  getCalculateTrackPointByTime: function (time) {\r\n    // 先判断最后一个点是否为原始点\r\n    var endpoint = this.getTrackPointByTime(time)\r\n    var startPt = this.getStartTrackPoint()\r\n    var endPt = this.getEndTrackPoint()\r\n    var times = this.getTimes()\r\n    if (time < startPt.time || time > endPt.time) return;\r\n    var left = 0\r\n    var right = times.length - 1\r\n    var n\r\n    // 处理只有一个点情况\r\n    if (left === right) {\r\n      return endpoint\r\n    }\r\n    while (right - left !== 1) {\r\n      n = parseInt((left + right) / 2)\r\n      if (time > times[n]) left = n\r\n      else right = n\r\n    }\r\n\r\n    var t0 = times[left]\r\n    var t1 = times[right]\r\n    var t = time\r\n    if (!this.getTrackPointByTime(t0)){\r\n      console.log('error');\r\n    }\r\n    startPt = L.point(this.getTrackPointByTime(t0).lng, this.getTrackPointByTime(t0).lat)\r\n    endPt = L.point(this.getTrackPointByTime(t1).lng, this.getTrackPointByTime(t1).lat)\r\n    var s = startPt.distanceTo(endPt);\r\n    // 不同时间在同一个点情形\r\n    if (s <= 0) {\r\n      endpoint = this.getTrackPointByTime(t1)\r\n      return endpoint\r\n    }\r\n    var v = s / (t1 - t0)\r\n    var sinx = (endPt.y - startPt.y) / s\r\n    var cosx = (endPt.x - startPt.x) / s\r\n    var step = v * (t - t0)\r\n    var x = startPt.x + step * cosx\r\n    var y = startPt.y + step * sinx\r\n    var dir = endPt.x >= startPt.x ? (Math.PI * 0.5 - Math.asin(sinx)) * 180 / Math.PI : (Math.PI * 1.5 + Math.asin(sinx)) * 180 / Math.PI\r\n\r\n    if (endpoint) {\r\n      if (endpoint.dir === undefined) { endpoint.dir = dir }\r\n    } else {\r\n      endpoint = {\r\n        lng: x,\r\n        lat: y,\r\n        dir: dir,\r\n        isOrigin: false,\r\n        time: time\r\n      }\r\n    }\r\n    return endpoint\r\n  },\r\n\r\n  getTrackPointsBeforeTime: function (time) {\r\n    var tpoints = []\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      if (this._trackPoints[i].time < time) {\r\n        tpoints.push(this._trackPoints[i])\r\n      }\r\n    }\r\n    var endPt = this.getCalculateTrackPointByTime(time)\r\n    if (endPt) {\r\n      tpoints.push(endPt)\r\n    }\r\n    return tpoints\r\n  },\r\n\r\n  _update: function () {\r\n    this._sortTrackPointsByTime()\r\n    this._updatetimeTick()\r\n  },\r\n\r\n  _sortTrackPointsByTime: function () {\r\n    var len = this._trackPoints.length\r\n    for (let i = 0; i < len; i++) {\r\n      for (let j = 0; j < len - 1 - i; j++) {\r\n        if (this._trackPoints[j].time > this._trackPoints[j + 1].time) {\r\n          let tmp = this._trackPoints[j + 1]\r\n          this._trackPoints[j + 1] = this._trackPoints[j]\r\n          this._trackPoints[j] = tmp\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _updatetimeTick: function () {\r\n    this._timeTick = {}\r\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\r\n      this._timeTick[this._trackPoints[i].time] = this._trackPoints[i]\r\n    }\r\n  }\r\n})\r\n\r\nexport var track = function (dataObj, options) {\r\n  return new Track(dataObj, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/track.js","// import L from 'leaflet'\r\n\r\nexport var TrackController = L.Class.extend({\r\n\r\n  initialize: function (tracks, draw, map, options) {\r\n    L.setOptions(this, options)\r\n\r\n    this._map = map;\r\n\r\n    this._tracks = []\r\n\r\n    this._minTime = null\r\n    this._maxTime = null\r\n\r\n    this._draw = draw\r\n\r\n    if (tracks && tracks.length) {\r\n      for (let i = 0, len = tracks.length; i < len; i++) {\r\n        this._tracks.push(tracks[i])\r\n      }\r\n    }\r\n\r\n    this._update()\r\n\r\n    this._caculateCount()\r\n\r\n    this.locateToFirstTrack()\r\n  },\r\n\r\n  getMinTime: function () {\r\n    return this._minTime\r\n  },\r\n\r\n  getMaxTime: function () {\r\n    return this._maxTime\r\n  },\r\n\r\n  locateToFirstTrack: function () {\r\n    if (this._tracks.length) {\r\n      var track0 = this._tracks[0]\r\n      var spoint = track0.getStartTrackPoint();\r\n      if (spoint) {\r\n        var latlng = L.latLng(spoint.lat, spoint.lng);\r\n        this._map.panTo(latlng);\r\n      }\r\n    }\r\n  },\r\n\r\n  addTrack: function (track) {\r\n    if (track) {\r\n      this._tracks.push(track)\r\n      this._update()\r\n    }\r\n  },\r\n\r\n  drawTracksByTime: function (time) {\r\n    this._draw.clear()\r\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n      let track = this._tracks[i]\r\n      let tps = track.getTrackPointsBeforeTime(time)\r\n      if (tps && tps.length) this._draw.drawTrack(tps)\r\n    }\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._tracks.length) {\r\n      this._minTime = this._tracks[0].getStartTrackPoint().time\r\n      this._maxTime = this._tracks[0].getEndTrackPoint().time\r\n      for (let i = 0, len = this._tracks.length; i < len; i++) {\r\n        let stime = this._tracks[i].getStartTrackPoint().time\r\n        let etime = this._tracks[i].getEndTrackPoint().time\r\n        if (stime < this._minTime) {\r\n          this._minTime = stime\r\n        }\r\n        if (etime > this._maxTime) {\r\n          this._maxTime = etime\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _caculateCount: function () {\r\n    var shipCount = this._tracks.length\r\n    var pointCount = 0\r\n    for (let i = 0, len = shipCount; i < len; i++) {\r\n      pointCount += this._tracks[i]._trackPoints.length\r\n    }\r\n    console.log('共有: ' + shipCount + '艘船;')\r\n    console.log('共有: ' + pointCount + '个轨迹点;')\r\n  }\r\n\r\n})\r\n\r\nexport var trackController = function (tracks, draw, options) {\r\n  return new TrackController(tracks, draw, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/trackcontroller.js","// import L from 'leaflet'\r\nimport './requestanimationframe.js'\r\n\r\nexport var Clock = L.Class.extend({\r\n\r\n  options: {\r\n    speed: 13,\r\n    maxSpeed: 65\r\n  },\r\n\r\n  initialize: function (trackController, callback, options) {\r\n    L.setOptions(this, options)\r\n    this._trackController = trackController\r\n    this._endTime = this._trackController.getMaxTime()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this._speed = this.options.speed\r\n    this._maxSpeed = this.options.maxSpeed\r\n    this._callback = callback || function () {}\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  // 计算帧率 ， 单位：帧/秒，浏览器的最大值是：60帧/秒\r\n  caculateFps: function (now) {\r\n    var fps = 1000 / (now - this._lastFpsUpdateTime)\r\n    return fps\r\n  },\r\n\r\n  // 计算两帧时间间隔，单位：秒\r\n  caculatefpsTime: function (now) {\r\n    var time = (now - this._lastFpsUpdateTime) / 1000\r\n    if (this._lastFpsUpdateTime === 0) {\r\n      time = 0\r\n    }\r\n    this._lastFpsUpdateTime = now\r\n    return time\r\n  },\r\n\r\n  _tick: function () {\r\n    var now = +new Date()\r\n    var fpstime = this.caculatefpsTime(now)\r\n    var isPause = false\r\n    var stepTime = fpstime * Math.pow(2, this._speed - 1)\r\n    this._curTime += stepTime\r\n    if (this._curTime >= this._endTime) {\r\n      this._curTime = this._endTime\r\n      isPause = true\r\n    }\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    this._callback(this._curTime)\r\n    if (!isPause) this._intervalID = window.requestAnimationFrame(this._tick.bind(this))\r\n  },\r\n\r\n  start: function () {\r\n    if (this._intervalID) return;\r\n    this._intervalID = window.requestAnimationFrame(this._tick.bind(this))\r\n  },\r\n\r\n  stop: function () {\r\n    if (!this._intervalID) return;\r\n    window.cancelAnimationFrame(this._intervalID)\r\n    this._intervalID = null\r\n    this._lastFpsUpdateTime = 0\r\n  },\r\n\r\n  rePlaying: function () {\r\n    this.stop()\r\n    this._curTime = this._trackController.getMinTime()\r\n    this.start()\r\n  },\r\n\r\n  slowSpeed: function () {\r\n    this._speed <= 1 ? this._speed : this._speed -= 1;\r\n    if (this._intervalID) {\r\n      this.stop();\r\n      this.start();\r\n    }\r\n  },\r\n\r\n  quickSpeed: function () {\r\n    this._speed >= this._maxSpeed ? this._speed : this._speed += 1;\r\n    if (this._intervalID) {\r\n      this.stop();\r\n      this.start();\r\n    }\r\n  },\r\n\r\n  getSpeed: function () {\r\n    return this._speed\r\n  },\r\n\r\n  getCurTime: function () {\r\n    return this._curTime\r\n  },\r\n\r\n  getStartTime: function () {\r\n    return this._trackController.getMinTime()\r\n  },\r\n\r\n  getEndTime: function () {\r\n    return this._trackController.getMaxTime()\r\n  },\r\n\r\n  isPlaying: function () {\r\n    return this._intervalID ? 1 : 0\r\n  },\r\n\r\n  setCursor: function (time) {\r\n    this._curTime = time\r\n    this._trackController.drawTracksByTime(this._curTime)\r\n    this._callback(this._curTime)\r\n  },\r\n\r\n  setSpeed: function (speed) {\r\n    this._speed = speed\r\n    if (this._intervalID) {\r\n      this.stop()\r\n      this.start()\r\n    }\r\n  }\r\n})\r\n\r\nexport var clock = function (trackController, callback, options) {\r\n  return new Clock(trackController, callback, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/clock.js","// window = window || this\r\nwindow.requestAnimationFrame =\r\n  (function () {\r\n    var originalWebkitMethod,\r\n      wrapper,\r\n      callback,\r\n      geckoVersion = 0,\r\n      userAgent = navigator.userAgent,\r\n      index = 0,\r\n      self = this;\r\n\r\n    // Workaround for chrome 10 bug where Chrome\r\n    // does not pass the thime to the animation function\r\n\r\n    if (window.webkitRequestAnimationFrame) {\r\n      // Define the wrapper\r\n\r\n      wrapper = function (time) {\r\n        if (time === undefined) {\r\n          time = +new Date();\r\n        }\r\n        self.callback(time);\r\n      };\r\n\r\n      // make the switch\r\n      originalWebkitMethod = window.webkitRequestAnimationFrame;\r\n\r\n      window.webkitRequestAnimationFrame = function (callback, element) {\r\n        self.callback = callback;\r\n        // Browser calls wrapper; wrapper calls callback\r\n        originalWebkitMethod(wrapper, element)\r\n      }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations to 30-40 fps\r\n    if (window.mozRequestAnimationFrame) {\r\n      // Check the Gecko version. Gecko is used by browsers\r\n      // other than Firefox. Gecko 2.0 corresponds to Firefox 4.0\r\n      index = userAgent.indexOf('rv:');\r\n      if (userAgent.indexOf('Gecko') !== -1) {\r\n        geckoVersion = userAgent.substr(index + 3, 3);\r\n        if (geckoVersion === '2.0') {\r\n          // Forces the return statement to fall through\r\n          // to the setTimeout() function\r\n          window.mozRequestAnimationFrame = undefined;\r\n        }\r\n      }\r\n    }\r\n\r\n    return window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame ||\r\n      window.oRequestAnimationFrame ||\r\n      window.msRequestAnimationFrame ||\r\n\r\n      function (callback, element) {\r\n        var start, finish;\r\n        window.setTimeout(function () {\r\n          start = +new Date();\r\n          callback(start);\r\n          finish = +new Date();\r\n          self.timeout = 1000 / 60 - (finish - start);\r\n        }, self.timeout);\r\n      }\r\n  }())\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/requestanimationframe.js","// import L from 'leaflet'\r\nimport {TrackLayer} from './tracklayer'\r\n\r\nexport var Draw = L.Class.extend({\r\n\r\n    trackPointOptions: {\r\n      isDraw: false,\r\n      useCanvas: true,\r\n      stroke: false,\r\n      color: '#ef0300',\r\n      fill: true,\r\n      fillColor: '#ef0300',\r\n      opacity:0.3,\r\n      radius: 4\r\n    },\r\n    trackLineOptions: {\r\n      isDraw: false,\r\n      stroke: true,\r\n      color: '#1C54E2', // stroke color\r\n      weight: 2,\r\n      fill: false,\r\n      fillColor: '#000',\r\n      opacity:0.3\r\n    },\r\n    shipOptions: {\r\n      useImg: false,\r\n      imgUrl: '../../static/images/ship.png',\r\n      width: 8,\r\n      height: 18,\r\n      color: '#00f', // stroke color\r\n      fillColor: '#9FD12D'\r\n    },\r\n    toolTipOptions: {\r\n      offset: [0, 0],\r\n      direction: 'top',\r\n      permanent: false\r\n    },\r\n\r\n  initialize: function (map, options) {\r\n    // L.setOptions(this, options) //无法执行深拷贝\r\n    this.trackPointOptions = L.extend(this.trackPointOptions, options.trackPointOptions)\r\n    this.trackLineOptions = L.extend(this.trackLineOptions, options.trackLineOptions)\r\n    this.shipOptions = L.extend(this.shipOptions, options.shipOptions)\r\n    this.toolTipOptions = L.extend(this.toolTipOptions, options.toolTipOptions)\r\n    this._map = map\r\n    this._trackLayer = new TrackLayer().addTo(map)\r\n    this._canvas = this._trackLayer.getContainer()\r\n    this._ctx = this._canvas.getContext('2d')\r\n    this._bufferTracks = []\r\n    this._trackPointFeatureGroup = L.featureGroup([]).addTo(map)\r\n\r\n    this._trackLayer.on('update', this._trackLayerUpdate, this)\r\n    this._map.on('mousemove', this._onmousemoveEvt, this)\r\n  },\r\n\r\n  update: function () {\r\n    this._trackLayerUpdate()\r\n  },\r\n\r\n  _trackLayerUpdate: function () {\r\n    if (this._bufferTracks.length) {\r\n      this._clearLayer()\r\n      this._bufferTracks.forEach(function (element, index) {\r\n        this._drawTrack(element, false)\r\n      }.bind(this));\r\n    }\r\n  },\r\n\r\n  _onmousemoveEvt: function (e) {\r\n    if (!this.trackPointOptions.isDraw) {\r\n      return\r\n    }\r\n    var point = e.layerPoint\r\n    if (this._bufferTracks.length) {\r\n      for (let i = 0, leni = this._bufferTracks.length; i < leni; i++) {\r\n        for (let j = 0, len = this._bufferTracks[i].length; j < len; j++) {\r\n          let tpoint = this._map.latLngToLayerPoint(L.latLng(this._bufferTracks[i][j].lat, this._bufferTracks[i][j].lng))\r\n          if (point.distanceTo(tpoint) <= this.trackPointOptions.radius) {\r\n            this._opentoolTip(this._bufferTracks[i][j])\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    this._canvas.style.cursor = 'pointer'\r\n  },\r\n\r\n  _opentoolTip: function (trackpoint) {\r\n    if (this._map.hasLayer(this._tooltip)) {\r\n      this._map.removeLayer(this._tooltip)\r\n    }\r\n    this._canvas.style.cursor = 'default'\r\n    var latlng = L.latLng(trackpoint.lat, trackpoint.lng)\r\n    var tooltip = this._tooltip = L.tooltip(this.toolTipOptions)\r\n    tooltip.setLatLng(latlng)\r\n    tooltip.addTo(this._map)\r\n    tooltip.setContent(this.getTooltipText(trackpoint))\r\n  },\r\n\r\n  _drawTrack: function (trackpoints) {\r\n    // 画轨迹线\r\n    if (this.trackLineOptions.isDraw) {\r\n      this._drawTrackLine(trackpoints)\r\n    }\r\n    // 画船\r\n    if (this.shipOptions.useImg) {\r\n      this._drawShip2(trackpoints[trackpoints.length - 1])\r\n    } else {\r\n      this._drawShip(trackpoints[trackpoints.length - 1])\r\n    }\r\n    // 画经过的轨迹点\r\n    if (this.trackPointOptions.isDraw) {\r\n      if (this.trackPointOptions.useCanvas) {\r\n        this._drawTrackPoints(trackpoints)\r\n      } else {\r\n        this._drawTrackPoints2(trackpoints)\r\n      }\r\n    }\r\n  },\r\n\r\n  drawTrack: function (trackpoints) {\r\n    this._bufferTracks.push(trackpoints)\r\n    this._drawTrack(trackpoints)\r\n  },\r\n\r\n  _drawTrackLine: function (trackpoints) {\r\n    var options = this.trackLineOptions\r\n    var tp0 = this._map.latLngToLayerPoint(L.latLng(trackpoints[0].lat, trackpoints[0].lng))\r\n    this._ctx.save()\r\n    this._ctx.beginPath()    \r\n    // 画轨迹线\r\n    this._ctx.moveTo(tp0.x, tp0.y)\r\n    for (let i = 1, len = trackpoints.length; i < len; i++) {\r\n      let tpi = this._map.latLngToLayerPoint(L.latLng(trackpoints[i].lat, trackpoints[i].lng))\r\n      this._ctx.lineTo(tpi.x, tpi.y)\r\n    }\r\n    this._ctx.globalAlpha = options.opacity;\r\n    if (options.stroke) {\r\n      this._ctx.strokeStyle = options.color\r\n      this._ctx.lineWidth = options.weight\r\n      this._ctx.stroke()\r\n    }\r\n    if (options.fill) {\r\n      this._ctx.fillStyle = options.fillColor\r\n      this._ctx.fill()\r\n    }\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawTrackPoints: function (trackpoints) {\r\n    var options = this.trackPointOptions\r\n    this._ctx.save()\r\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\r\n      if (trackpoints[i].isOrigin) {\r\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\r\n        let radius = options.radius\r\n        let point = this._map.latLngToLayerPoint(latLng)\r\n        this._ctx.beginPath()\r\n        this._ctx.arc(point.x, point.y, radius, 0, Math.PI * 2, false)\r\n        this._ctx.globalAlpha = options.opacity;\r\n        if (options.stroke) {\r\n          this._ctx.strokeStyle = options.color\r\n          this._ctx.stroke()\r\n        }\r\n        if (options.fill) {\r\n          this._ctx.fillStyle = options.fillColor\r\n          this._ctx.fill()\r\n        }\r\n      }\r\n    }\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawTrackPoints2: function (trackpoints) {\r\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\r\n      if (trackpoints[i].isOrigin) {\r\n        let latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\r\n        let cricleMarker = L.circleMarker(latLng, this.trackPointOptions)\r\n        cricleMarker.bindTooltip(this.getTooltipText(trackpoints[i]), this.toolTipOptions)\r\n        this._trackPointFeatureGroup.addLayer(cricleMarker)\r\n      }\r\n    }\r\n  },\r\n\r\n  _drawShip: function (trackpoint) {\r\n    var point = this._map.latLngToLayerPoint(L.latLng(trackpoint.lat, trackpoint.lng))\r\n    var rotate = trackpoint.dir || 0\r\n    var w = this.shipOptions.width\r\n    var h = this.shipOptions.height\r\n    var dh = h / 3\r\n\r\n    this._ctx.save()\r\n    this._ctx.fillStyle = this.shipOptions.fillColor\r\n    this._ctx.strokeStyle = this.shipOptions.color\r\n    this._ctx.translate(point.x, point.y)\r\n    this._ctx.rotate((Math.PI / 180) * rotate)\r\n    this._ctx.beginPath()\r\n    this._ctx.moveTo(0, 0 - h / 2)\r\n    this._ctx.lineTo(0 - w / 2, 0 - h / 2 + dh)\r\n    this._ctx.lineTo(0 - w / 2, 0 + h / 2)\r\n    this._ctx.lineTo(0 + w / 2, 0 + h / 2)\r\n    this._ctx.lineTo(0 + w / 2, 0 - h / 2 + dh)\r\n    this._ctx.closePath()\r\n    this._ctx.fill()\r\n    this._ctx.stroke()\r\n    this._ctx.restore()\r\n  },\r\n\r\n  _drawShip2: function (trackpoint) {\r\n    var point = this._map.latLngToLayerPoint(L.latLng(trackpoint.lat, trackpoint.lng))\r\n    var dir = trackpoint.dir || 0\r\n    var width = this.shipOptions.width\r\n    var height = this.shipOptions.height\r\n    var offset = {\r\n      x: width / 2,\r\n      y: height / 2\r\n    }\r\n    var img = new Image()\r\n    img.onload = function () {\r\n      this._ctx.save()\r\n      this._ctx.translate(point.x, point.y)\r\n      this._ctx.rotate((Math.PI / 180) * dir)\r\n      this._ctx.drawImage(img, 0 - offset.x, 0 - offset.y, width, height)\r\n      this._ctx.restore()\r\n    }.bind(this)\r\n    img.src = this.shipOptions.imgUrl\r\n  },\r\n\r\n  getTooltipText: function (targetobj) {\r\n    var content = [];\r\n    content.push('<table>');\r\n    if (targetobj.info && targetobj.info.length) {\r\n      for (let i = 0, len = targetobj.info.length; i < len; i++) {\r\n        content.push('<tr>')\r\n        content.push('<td>' + targetobj.info[i].key + '</td>')\r\n        content.push('<td>' + targetobj.info[i].value + '</td>')\r\n        content.push('</tr>')\r\n      }\r\n    }\r\n    content.push('</table>');\r\n    content = content.join('');\r\n    return content;\r\n  },\r\n\r\n  removeLayer: function () {\r\n    if (this._map.hasLayer(this._trackLayer)) {\r\n      this._map.removeLayer(this._trackLayer)\r\n    }\r\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\r\n      this._map.removeLayer(this._trackPointFeatureGroup)\r\n    }\r\n  },\r\n\r\n  _clearLayer: function () {\r\n    var bounds = this._trackLayer.getBounds()\r\n    if (bounds) {\r\n      var size = bounds.getSize();\r\n      this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);\r\n    } else {\r\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n    }\r\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\r\n      this._trackPointFeatureGroup.clearLayers()\r\n    }\r\n  },\r\n\r\n  clear: function () {\r\n    this._clearLayer()\r\n    this._bufferTracks = []\r\n  }\r\n})\r\n\r\nexport var draw = function (map, options) {\r\n  return new Draw(map, options)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/draw.js","// import L from 'leaflet'\r\n\r\nexport var TrackLayer = L.Renderer.extend({\r\n\r\n  initialize: function (options) {\r\n    L.Renderer.prototype.initialize.call(this, options);\r\n    this.options.padding = 0.1;\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._container = L.DomUtil.create('canvas', 'leaflet-zoom-animated');\r\n    // this._container.setAttribute('id', 'canvas');\r\n\r\n    var pane = map.getPane(this.options.pane);\r\n    pane.appendChild(this._container);\r\n\r\n    this._ctx = this._container.getContext('2d');\r\n\r\n    this._update();\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    L.DomUtil.remove(this._container);\r\n  },\r\n\r\n  getContainer: function () {\r\n    return this._container\r\n  },\r\n\r\n  getBounds: function () {\r\n    return this._bounds\r\n  },\r\n\r\n  _update: function () {\r\n    if (this._map._animatingZoom && this._bounds) {\r\n      return;\r\n    }\r\n\r\n    L.Renderer.prototype._update.call(this);\r\n\r\n    var b = this._bounds,\r\n      container = this._container,\r\n      size = b.getSize(),\r\n      m = L.Browser.retina ? 2 : 1;\r\n\r\n    L.DomUtil.setPosition(container, b.min);\r\n\r\n    // set canvas size (also clearing it); use double size on retina\r\n    container.width = m * size.x;\r\n    container.height = m * size.y;\r\n    container.style.width = size.x + 'px';\r\n    container.style.height = size.y + 'px';\r\n\r\n    if (L.Browser.retina) {\r\n      this._ctx.scale(2, 2);\r\n    }\r\n\r\n    // translate so we use the same path coordinates after canvas element moves\r\n    this._ctx.translate(-b.min.x, -b.min.y);\r\n\r\n    // Tell paths to redraw themselves\r\n    this.fire('update');\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/tracklayer.js","export var Util = {\r\n  /**\r\n   * 根据unix时间戳(单位:秒)获取时间字符串\r\n   * @param  {[int]} time     [时间戳（精确到秒）]\r\n   * @param  {[string]} accuracy [精度，日：d, 小时：h,分钟：m,秒：s]\r\n   * @return {[string]}          [yy:mm:dd hh:mm:ss]\r\n   */\r\n  getTimeStrFromUnix: function (time, accuracy) {\r\n    accuracy = accuracy || 's'\r\n    time = parseInt(time * 1000)\r\n    if (isNaN(time)) {\r\n      return ''\r\n    }\r\n    var newDate = new Date(time)\r\n    var year = newDate.getFullYear()\r\n    var month = (newDate.getMonth() + 1) < 10 ? '0' + (newDate.getMonth() + 1) : newDate.getMonth() + 1\r\n    var day = newDate.getDate() < 10 ? '0' + newDate.getDate() : newDate.getDate()\r\n    var hours = newDate.getHours() < 10 ? '0' + newDate.getHours() : newDate.getHours()\r\n    var minuts = newDate.getMinutes() < 10 ? '0' + newDate.getMinutes() : newDate.getMinutes()\r\n    var seconds = newDate.getSeconds() < 10 ? '0' + newDate.getSeconds() : newDate.getSeconds()\r\n    if (accuracy === 'd') {\r\n       var ret = year + '-' + month + '-' + day\r\n    } else if (accuracy === 'h') {\r\n       var ret = year + '-' + month + '-' + day + ' ' + hours\r\n     } else if (accuracy === 'm') {\r\n       var ret = year + '-' + month + '-' + day + ' ' + hours + ':' + minuts \r\n     } else {\r\n       var ret = year + '-' + month + '-' + day + ' ' + hours + ':' + minuts + ':' + seconds      \r\n     }\r\n    return ret\r\n  },\r\n\r\n  latlngTodfm: function (val, latlngtype, iskeepCapacity, spointCount) {\r\n    var resobj = [];\r\n    var dir;\r\n    var newval = parseFloat(val);\r\n    var positiveNum = Math.abs(newval);\r\n    var du = parseInt(positiveNum);\r\n    var fen = parseInt(positiveNum * 60) - du * 60;\r\n    var miao = positiveNum * 60 * 60 - fen * 60 - du * 60 * 60;\r\n    if (typeof spointCount === 'undefined' || spointCount <= 0) { spointCount = 0; }\r\n    if (spointCount === 0) {\r\n      miao = parseInt(miao);\r\n    } else {\r\n      miao = miao.toFixed(spointCount);\r\n    }\r\n    if (typeof iskeepCapacity === 'undefined') { iskeepCapacity = true; }\r\n    if (iskeepCapacity) {\r\n      if (latlngtype === 'lng') {\r\n        if (du < 10) du = '00' + du;\r\n        if (du >= 10 && du < 100) du = '0' + du;\r\n      } else {\r\n        if (du < 10) du = '0' + du;\r\n      }\r\n      // if(fen<10) fen = '0'+fen;\r\n      // if(miao<10 && spointCount===0) miao = '0'+miao;\r\n    }\r\n    if (latlngtype === 'lat') {\r\n      if (newval < 0) dir = 'S';\r\n      else dir = 'N';\r\n    }\r\n    if (latlngtype === 'lng') {\r\n      if (newval < 0) dir = 'W';\r\n      else dir = 'E';\r\n    }\r\n    resobj.push(du, fen, miao, dir);\r\n    return resobj;\r\n  },\r\n\r\n  latlngTodfmStr: function (val, latlngtype, spointCount) {\r\n    var res = this.latlngTodfm(val, latlngtype, spointCount);\r\n    var str = res[3] + ' ' + res[0] + '°' + res[1] + '′' + res[2] + '″';\r\n    return str;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/leaflet.playback/util.js"],"sourceRoot":""}