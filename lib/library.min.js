!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("Library",[],i):"object"==typeof exports?exports.Library=i():t.Library=i()}(this,function(){return function(t){function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}var e={};return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,e){"use strict";var s=e(1);L.Control.PlayBack=L.Control.extend({options:{position:"topright",data:{}},bootstrapIconClass:{play:"glyphicon-play",stop:"glyphicon-pause",restart:"glyphicon-repeat",slow:"glyphicon-backward",quick:"glyphicon-forward",close:"glyphicon-remove"},initialize:function(t){L.Control.prototype.initialize.call(this,t),this._data=this.options.data,this._playback={}},onAdd:function(t){return this._initLayout(),this._update(),this._initEvts(),this._container},onRemove:function(t){this._playback.draw.removeLayer()},getControlHtml:function(){var t=[];return t.push('<div class="optionsDiv">'),t.push('<label><input type="checkbox" class="isshowpoint">显示轨迹点</label>'),t.push('<label><input type="checkbox" class="isshowline">显示轨迹线</label>'),t.push("</div>"),t.push('<div class="operateContainer">'),t.push('<span class="btn-play glyphicon glyphicon-play" title="播放"></span>'),t.push('<span class="btn-restart glyphicon glyphicon-repeat" title="重播"></span>'),t.push('<span class="btn-slow glyphicon glyphicon-backward" title="减速"></span>'),t.push('<span class="btn-quick glyphicon glyphicon-forward" title="加速"></span>'),t.push('<span class="speed"></span>'),t.push('<span class="btn-close glyphicon glyphicon-remove" title="关闭"></span>'),t.push("</div>"),t.push('<div class="scrollContainer">'),t.push('<span class="stime"></span>'),t.push('<span class="etime"></span>'),t.push('<input type="range" class="range"/>'),t.push('<span class="curtime"></span>'),t.push("</div>"),t.join("")},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-control-playback"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container);var t=$(this._container);t.html(this.getControlHtml()),this._operateObjs={isshowpoint:t.find(".isshowpoint"),isshowline:t.find(".isshowline"),play:t.find(".btn-play"),restart:t.find(".btn-restart"),slow:t.find(".btn-slow"),quick:t.find(".btn-quick"),speed:t.find(".speed"),close:t.find(".btn-close"),startTime:t.find(".stime"),endTime:t.find(".etime"),range:t.find(".range"),curTime:t.find(".curtime")}},_initEvts:function(){L.DomEvent.on(this._operateObjs.isshowpoint.get(0),"change",this._isshowpoint,this),L.DomEvent.on(this._operateObjs.isshowline.get(0),"change",this._isshowline,this),L.DomEvent.on(this._operateObjs.play.get(0),"click",this._play,this),L.DomEvent.on(this._operateObjs.restart.get(0),"click",this._restart,this),L.DomEvent.on(this._operateObjs.slow.get(0),"click",this._slow,this),L.DomEvent.on(this._operateObjs.quick.get(0),"click",this._quick,this),L.DomEvent.on(this._operateObjs.close.get(0),"click",this._close,this),L.DomEvent.on(this._operateObjs.range.get(0),"click mousedown dbclick",L.DomEvent.stopPropagation).on(this._operateObjs.range.get(0),"click",L.DomEvent.preventDefault).on(this._operateObjs.range.get(0),"change",this._scrollchange,this).on(this._operateObjs.range.get(0),"mousemove",this._scrollchange,this)},_isshowpoint:function(t){t.target.checked?this._playback.draw.options.trackPointOptions.isDraw=!0:this._playback.draw.options.trackPointOptions.isDraw=!1,this._playback.draw.update()},_isshowline:function(t){t.target.checked?this._playback.draw.options.trackLineOptions.isDraw=!0:this._playback.draw.options.trackLineOptions.isDraw=!1,this._playback.draw.update()},_play:function(){var t=this._operateObjs.play;t.hasClass(this.bootstrapIconClass.play)?(t.removeClass(this.bootstrapIconClass.play),t.addClass(this.bootstrapIconClass.stop),t.attr("title","停止"),this._playback.clock.start()):(t.removeClass(this.bootstrapIconClass.stop),t.addClass(this.bootstrapIconClass.play),t.attr("title","播放"),this._playback.clock.stop())},_restart:function(){var t=this._operateObjs.play;t.removeClass(this.bootstrapIconClass.play),t.addClass(this.bootstrapIconClass.stop),t.attr("title","停止"),this._playback.clock.rePlaying()},_slow:function(){this._playback.clock.slowSpeed();var t=this._playback.clock.getSpeed();this._operateObjs.speed.html("X"+t)},_quick:function(){this._playback.clock.quickSpeed();var t=this._playback.clock.getSpeed();this._operateObjs.speed.html("X"+t)},_close:function(){return L.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this},_scrollchange:function(t){var i=Number(t.target.value);this._playback.clock.setCursor(i)},_update:function(){var t=this._map,i=this._dataTransform(this._data.msg.shipList);if(t&&i){for(var e=[],a=0,n=i.length;a<n;a++){var o=new s.PlayBack.Track(i[a],this.options);e.push(o)}this._playback.draw=new s.PlayBack.Draw(t,this.options),this._playback.trackController=new s.PlayBack.TrackController(e,this._playback.draw,this.options),this._playback.clock=new s.PlayBack.Clock(this._playback.trackController,this._clockCallback.bind(this),this.options),this._operateObjs.speed.html("X"+this._playback.clock.getSpeed()),this.setTime(),this._playback.clock.setCursor(this.getStartTime())}},setTime:function(){var t=s.PlayBack.Util.getTimeStrFromUnix(this.getStartTime()),i=s.PlayBack.Util.getTimeStrFromUnix(this.getEndTime()),e=s.PlayBack.Util.getTimeStrFromUnix(this.getCurTime());this._operateObjs.startTime.html(t),this._operateObjs.endTime.html(i),this._operateObjs.curTime.html(e),this._operateObjs.range.attr("min",this.getStartTime()),this._operateObjs.range.attr("max",this.getEndTime()),this._operateObjs.range.val(this.getCurTime())},getStartTime:function(){return this._playback.clock.getStartTime()},getEndTime:function(){return this._playback.clock.getEndTime()},getCurTime:function(){return this._playback.clock.getCurTime()},_clockCallback:function(t){var i=s.PlayBack.Util.getTimeStrFromUnix(t);if(this._operateObjs.curTime.html(i),this._operateObjs.range.val(t),t>=this.getEndTime()){var e=this._operateObjs.play;e.removeClass(this.bootstrapIconClass.stop),e.addClass(this.bootstrapIconClass.play),e.attr("title","播放"),this._playback.clock.stop()}},_dataTransform:function(t){if(!t||!t.length)return void console.log("playback_error:data transform error!");for(var i=[],e=0,a=t.length;e<a;e++){var n=t[e].num,o={};o.timePosList=[];for(var r=0,c=t[e].posList.length;r<c;r++){var h={},l=t[e].posList[r];h.lng=l.lo/6e5,h.lat=l.la/6e5,h.time=l.ti,h.dir=parseFloat(l.co/10),h.heading=parseFloat(l.he),h.info=[{key:"批号",value:n},{key:"经度",value:s.PlayBack.Util.latlngTodfmStr(h.lat,"lng")},{key:"纬度",value:s.PlayBack.Util.latlngTodfmStr(h.lat,"lat")},{key:"时间",value:s.PlayBack.Util.getTimeStrFromUnix(l.ti)},{key:"航向",value:(l.co/10).toFixed(1)+"°"},{key:"航艏向",value:parseFloat(l.he).toFixed(1)+"°"},{key:"航速",value:parseFloat(l.sp/10).toFixed(1)+"节"}],o.timePosList.push(h)}i.push(o)}return i}}),L.control.playback=function(t){return new L.Control.PlayBack(t)}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.playback=i.PlayBack=void 0;var s=e(2),a=e(3),n=e(4),o=e(6),r=e(8),c={},h={};c.Track=s.Track,c.TrackController=a.TrackController,c.Clock=n.Clock,c.Draw=o.Draw,h.track=s.track,h.trackController=a.trackController,h.clock=n.clock,h.draw=o.draw,c.Util=r.Util,i.PlayBack=c,i.playback=h},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=i.Track=L.Class.extend({initialize:function(t,i){if(L.setOptions(this,i),this._trackPoints=[],this._timeTick={},t.timePosList&&t.timePosList.length){for(var e=0,s=t.timePosList.length;e<s;e++)t.timePosList[e].isOrigin=!0,this._trackPoints.push(t.timePosList[e]);this._update()}},addTrackPoint:function(t){t.isOrigin=!0,this._trackPoints.push(t),this._update()},getTimes:function(){for(var t=[],i=0,e=this._trackPoints.length;i<e;i++)t.push(this._trackPoints[i].time);return t},getStartTrackPoint:function(){return this._trackPoints[0]},getEndTrackPoint:function(){return this._trackPoints[this._trackPoints.length-1]},getTrackPointByTime:function(t){return this._timeTick[t]},getCalculateTrackPointByTime:function(t){var i=this.getTrackPointByTime(t),e=this.getStartTrackPoint(),s=this.getEndTrackPoint(),a=this.getTimes();if(!(t<e.time||t>s.time)){var n,o=0,r=a.length-1;if(o===r)return i;for(;r-o!=1;)n=parseInt((o+r)/2),t>a[n]?o=n:r=n;var c=a[o],h=a[r],l=t;this.getTrackPointByTime(c)||console.log("error"),e=L.point(this.getTrackPointByTime(c).lng,this.getTrackPointByTime(c).lat),s=L.point(this.getTrackPointByTime(h).lng,this.getTrackPointByTime(h).lat);var p=e.distanceTo(s);if(p<=0)return i=this.getTrackPointByTime(h);var u=p/(h-c),_=(s.y-e.y)/p,m=(s.x-e.x)/p,d=u*(l-c),k=e.x+d*m,f=e.y+d*_,g=s.x>=e.x?180*(.5*Math.PI-Math.asin(_))/Math.PI:180*(1.5*Math.PI+Math.asin(_))/Math.PI;return i?void 0===i.dir&&(i.dir=g):i={lng:k,lat:f,dir:g,isOrigin:!1,time:t},i}},getTrackPointsBeforeTime:function(t){for(var i=[],e=0,s=this._trackPoints.length;e<s;e++)this._trackPoints[e].time<t&&i.push(this._trackPoints[e]);var a=this.getCalculateTrackPointByTime(t);return a&&i.push(a),i},_update:function(){this._sortTrackPointsByTime(),this._updatetimeTick()},_sortTrackPointsByTime:function(){for(var t=this._trackPoints.length,i=0;i<t;i++)for(var e=0;e<t-1-i;e++)if(this._trackPoints[e].time>this._trackPoints[e+1].time){var s=this._trackPoints[e+1];this._trackPoints[e+1]=this._trackPoints[e],this._trackPoints[e]=s}},_updatetimeTick:function(){this._timeTick={};for(var t=0,i=this._trackPoints.length;t<i;t++)this._timeTick[this._trackPoints[t].time]=this._trackPoints[t]}});i.track=function(t,i){return new s(t,i)}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=i.TrackController=L.Class.extend({initialize:function(t,i,e){if(L.setOptions(this,e),this._tracks=[],this._minTime=null,this._maxTime=null,this._draw=i,t&&t.length)for(var s=0,a=t.length;s<a;s++)this._tracks.push(t[s]);this._update(),this._caculateCount()},getMinTime:function(){return this._minTime},getMaxTime:function(){return this._maxTime},addTrack:function(t){t&&(this._tracks.push(t),this._update())},drawTracksByTime:function(t){this._draw.clear();for(var i=0,e=this._tracks.length;i<e;i++){var s=this._tracks[i],a=s.getTrackPointsBeforeTime(t);a&&a.length&&this._draw.drawTrack(a)}},_update:function(){if(this._tracks.length){this._minTime=this._tracks[0].getStartTrackPoint().time,this._maxTime=this._tracks[0].getEndTrackPoint().time;for(var t=0,i=this._tracks.length;t<i;t++){var e=this._tracks[t].getStartTrackPoint().time,s=this._tracks[t].getEndTrackPoint().time;e<this._minTime&&(this._minTime=e),s>this._maxTime&&(this._maxTime=s)}}},_caculateCount:function(){for(var t=this._tracks.length,i=0,e=0,s=t;e<s;e++)i+=this._tracks[e]._trackPoints.length;console.log("共有: "+t+"艘船;"),console.log("共有: "+i+"个轨迹点;")}});i.trackController=function(t,i,e){return new s(t,i,e)}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.clock=i.Clock=void 0,e(5);var s=i.Clock=L.Class.extend({options:{speed:13,maxSpeed:65},initialize:function(t,i,e){L.setOptions(this,e),this._trackController=t,this._endTime=this._trackController.getMaxTime(),this._curTime=this._trackController.getMinTime(),this._speed=this.options.speed,this._maxSpeed=this.options.maxSpeed,this._callback=i||function(){},this._lastFpsUpdateTime=0},caculateFps:function(t){return 1e3/(t-this._lastFpsUpdateTime)},caculatefpsTime:function(t){var i=(t-this._lastFpsUpdateTime)/1e3;return 0===this._lastFpsUpdateTime&&(i=0),this._lastFpsUpdateTime=t,i},_tick:function(){var t=+new Date,i=this.caculatefpsTime(t),e=!1,s=i*Math.pow(2,this._speed-1);this._curTime+=s,this._curTime>=this._endTime&&(this._curTime=this._endTime,e=!0),this._trackController.drawTracksByTime(this._curTime),this._callback(this._curTime),e||(this._intervalID=window.requestAnimationFrame(this._tick.bind(this)))},start:function(){this._intervalID||(this._intervalID=window.requestAnimationFrame(this._tick.bind(this)))},stop:function(){this._intervalID&&(window.cancelAnimationFrame(this._intervalID),this._intervalID=null,this._lastFpsUpdateTime=0)},rePlaying:function(){this.stop(),this._curTime=this._trackController.getMinTime(),this.start()},slowSpeed:function(){this._speed<=1?this._speed:this._speed-=1,this._intervalID&&(this.stop(),this.start())},quickSpeed:function(){this._speed>=this._maxSpeed?this._speed:this._speed+=1,this._intervalID&&(this.stop(),this.start())},getSpeed:function(){return this._speed},getCurTime:function(){return this._curTime},getStartTime:function(){return this._trackController.getMinTime()},getEndTime:function(){return this._trackController.getMaxTime()},isPlaying:function(){return this._intervalID?1:0},setCursor:function(t){this._curTime=t,this._trackController.drawTracksByTime(this._curTime),this._callback(this._curTime)},setSpeed:function(t){this._speed=t,this._intervalID&&(this.stop(),this.start())}});i.clock=function(t,i,e){return new s(t,i,e)}},function(t,i,e){"use strict";window.requestAnimationFrame=function(){var t,i,e=navigator.userAgent,s=0,a=this;return window.webkitRequestAnimationFrame&&(i=function(t){void 0===t&&(t=+new Date),a.callback(t)},t=window.webkitRequestAnimationFrame,window.webkitRequestAnimationFrame=function(e,s){a.callback=e,t(i,s)}),window.mozRequestAnimationFrame&&(s=e.indexOf("rv:"),-1!==e.indexOf("Gecko")&&"2.0"===e.substr(s+3,3)&&(window.mozRequestAnimationFrame=void 0)),window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,i){var e,s;window.setTimeout(function(){e=+new Date,t(e),s=+new Date,a.timeout=1e3/60-(s-e)},a.timeout)}}()},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.draw=i.Draw=void 0;var s=e(7),a=i.Draw=L.Class.extend({options:{trackPointOptions:{isDraw:!1,useCanvas:!0,stroke:!1,color:"#ef0300",fill:!0,fillColor:"#ef0300",radius:4},trackLineOptions:{isDraw:!1,stroke:!0,color:"#1C54E2",weight:2,fill:!1,fillColor:"#000"},shipOptions:{useImg:!1,imgUrl:"../../static/images/ship.png",width:8,height:18,color:"#00f",fillColor:"#9FD12D"},toolTipOptions:{offset:[0,0],direction:"top",permanent:!1}},initialize:function(t,i){L.setOptions(this,i),this._map=t,this._trackLayer=(new s.TrackLayer).addTo(t),this._canvas=this._trackLayer.getContainer(),this._ctx=this._canvas.getContext("2d"),this._bufferTracks=[],this._trackPointFeatureGroup=L.featureGroup([]).addTo(t),this._trackLayer.on("update",this._trackLayerUpdate,this),this._map.on("mousemove",this._onmousemoveEvt,this)},update:function(){this._trackLayerUpdate()},_trackLayerUpdate:function(){this._bufferTracks.length&&(this._clearLayer(),this._bufferTracks.forEach(function(t,i){this._drawTrack(t,!1)}.bind(this)))},_onmousemoveEvt:function(t){if(this.options.trackPointOptions.isDraw){var i=t.layerPoint;if(this._bufferTracks.length)for(var e=0,s=this._bufferTracks.length;e<s;e++)for(var a=0,n=this._bufferTracks[e].length;a<n;a++){var o=this._map.latLngToLayerPoint(L.latLng(this._bufferTracks[e][a].lat,this._bufferTracks[e][a].lng));if(i.distanceTo(o)<=this.options.trackPointOptions.radius)return void this._opentoolTip(this._bufferTracks[e][a])}this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor="pointer"}},_opentoolTip:function(t){this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor="default";var i=L.latLng(t.lat,t.lng),e=this._tooltip=L.tooltip(this.options.toolTipOptions);e.setLatLng(i),e.addTo(this._map),e.setContent(this.getTooltipText(t))},_drawTrack:function(t){this.options.trackLineOptions.isDraw&&this._drawTrackLine(t),this.options.shipOptions.useImg?this._drawShip2(t[t.length-1]):this._drawShip(t[t.length-1]),this.options.trackPointOptions.isDraw&&(this.options.trackPointOptions.useCanvas?this._drawTrackPoints(t):this._drawTrackPoints2(t))},drawTrack:function(t){this._bufferTracks.push(t),this._drawTrack(t)},_drawTrackLine:function(t){var i=this.options.trackLineOptions,e=this._map.latLngToLayerPoint(L.latLng(t[0].lat,t[0].lng));this._ctx.save(),this._ctx.beginPath(),this._ctx.moveTo(e.x,e.y);for(var s=1,a=t.length;s<a;s++){var n=this._map.latLngToLayerPoint(L.latLng(t[s].lat,t[s].lng));this._ctx.lineTo(n.x,n.y)}i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill()),this._ctx.restore()},_drawTrackPoints:function(t){var i=this.options.trackPointOptions;this._ctx.save();for(var e=0,s=t.length;e<s;e++)if(t[e].isOrigin){var a=L.latLng(t[e].lat,t[e].lng),n=i.radius,o=this._map.latLngToLayerPoint(a);this._ctx.beginPath(),this._ctx.arc(o.x,o.y,n,0,2*Math.PI,!1),i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill())}this._ctx.restore()},_drawTrackPoints2:function(t){for(var i=0,e=t.length;i<e;i++)if(t[i].isOrigin){var s=L.latLng(t[i].lat,t[i].lng),a=L.circleMarker(s,this.options.trackPointOptions);a.bindTooltip(this.getTooltipText(t[i]),this.options.toolTipOptions),this._trackPointFeatureGroup.addLayer(a)}},_drawShip:function(t){var i=this._map.latLngToLayerPoint(L.latLng(t.lat,t.lng)),e=t.dir||0,s=this.options.shipOptions.width,a=this.options.shipOptions.height,n=a/3;this._ctx.save(),this._ctx.fillStyle=this.options.shipOptions.fillColor,this._ctx.strokeStyle=this.options.shipOptions.color,this._ctx.translate(i.x,i.y),this._ctx.rotate(Math.PI/180*e),this._ctx.beginPath(),this._ctx.moveTo(0,0-a/2),this._ctx.lineTo(0-s/2,0-a/2+n),this._ctx.lineTo(0-s/2,0+a/2),this._ctx.lineTo(0+s/2,0+a/2),this._ctx.lineTo(0+s/2,0-a/2+n),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()},_drawShip2:function(t){var i=this._map.latLngToLayerPoint(L.latLng(t.lat,t.lng)),e=t.dir||0,s=this.options.shipOptions.width,a=this.options.shipOptions.height,n={x:s/2,y:a/2},o=new Image;o.onload=function(){this._ctx.save(),this._ctx.translate(i.x,i.y),this._ctx.rotate(Math.PI/180*e),this._ctx.drawImage(o,0-n.x,0-n.y,s,a),this._ctx.restore()}.bind(this),o.src=this.options.shipOptions.imgUrl},getTooltipText:function(t){var i=[];if(i.push("<table>"),t.info&&t.info.length)for(var e=0,s=t.info.length;e<s;e++)i.push("<tr>"),i.push("<td>"+t.info[e].key+"</td>"),i.push("<td>"+t.info[e].value+"</td>"),i.push("</tr>");return i.push("</table>"),i=i.join("")},removeLayer:function(){this._map.hasLayer(this._trackLayer)&&this._map.removeLayer(this._trackLayer),this._map.hasLayer(this._trackPointFeatureGroup)&&this._map.removeLayer(this._trackPointFeatureGroup)},_clearLayer:function(){var t=this._trackLayer.getBounds();if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);this._map.hasLayer(this._trackPointFeatureGroup)&&this._trackPointFeatureGroup.clearLayers()},clear:function(){this._clearLayer(),this._bufferTracks=[]}});i.draw=function(t,i){return new a(t,i)}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.TrackLayer=L.Renderer.extend({initialize:function(t){L.Renderer.prototype.initialize.call(this,t),this.options.padding=.1},onAdd:function(t){this._container=L.DomUtil.create("canvas","leaflet-zoom-animated"),this._container.setAttribute("id","canvas"),t.getPane(this.options.pane).appendChild(this._container),this._ctx=this._container.getContext("2d"),this._update()},onRemove:function(t){L.DomUtil.remove(this._container)},getContainer:function(){return this._container},getBounds:function(){return this._bounds},_update:function(){if(!this._map._animatingZoom||!this._bounds){L.Renderer.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),s=L.Browser.retina?2:1;L.DomUtil.setPosition(i,t.min),i.width=s*e.x,i.height=s*e.y,i.style.width=e.x+"px",i.style.height=e.y+"px",L.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}}})},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Util={getTimeStrFromUnix:function(t){if(t=parseInt(1e3*t),isNaN(t))return"";var i=new Date(t);return i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+(i.getDate()<10?"0"+i.getDate():i.getDate())+" "+(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())+":"+(i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds())},latlngTodfm:function(t,i,e,s){var a,n=[],o=parseFloat(t),r=Math.abs(o),c=parseInt(r),h=parseInt(60*r)-60*c,l=60*r*60-60*h-60*c*60;return(void 0===s||s<=0)&&(s=0),l=0===s?parseInt(l):l.toFixed(s),void 0===e&&(e=!0),e&&("lng"===i?(c<10&&(c="00"+c),c>=10&&c<100&&(c="0"+c)):c<10&&(c="0"+c)),"lat"===i&&(a=o<0?"S":"N"),"lng"===i&&(a=o<0?"W":"E"),n.push(c,h,l,a),n},latlngTodfmStr:function(t,i,e){var s=this.latlngTodfm(t,i,e);return s[3]+" "+s[0]+"°"+s[1]+"′"+s[2]+"″"}}}])});